import{c as V,j as e,a as k,B as S,X as W,S as U,b as _,r as T,u as q,E as G,d as H,e as X,T as J,f as K}from"./index-Cq8TzEY1.js";import{s as x}from"./storage-CVg25cfU.js";import{T as Q,a as Y,b as ee,c as ne}from"./tabs-DHhm9oYo.js";import{L as te}from"./loader-circle-DBlc3w4W.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=V("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function $({variant:s="default",size:c="md",title:a,subtitle:l,logo:i,badge:o,headerActions:p,showBack:m=!1,showClose:h=!1,showDivider:y=!0,onBack:C,onClose:v,footer:b,scrollable:j=!0,className:d,children:E,...L}){const O={sm:"w-72 max-h-80",md:"w-80 max-h-96",lg:"w-96 max-h-[32rem]",auto:"min-w-72 max-w-lg max-h-[80vh]"},r={default:"bg-background border-border shadow-lg",compact:"bg-card border-border shadow-md",mini:"bg-popover border-border shadow-sm"},g={default:"p-4",compact:"p-3",mini:"p-2"},u=a||l||i||o||p||m||h;return e.jsxs("div",{className:k("flex flex-col border rounded-lg overflow-hidden",O[c],r[s],d),...L,children:[u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:k("flex items-center gap-3",g[s]),children:[m&&e.jsx(S,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:C,children:e.jsx(se,{className:"h-4 w-4"})}),i&&e.jsx("div",{className:"shrink-0",children:i}),e.jsxs("div",{className:"flex-1 min-w-0",children:[a&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-sm font-semibold text-foreground truncate",children:a}),o&&o]}),l&&e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:l})]}),p&&e.jsx("div",{className:"shrink-0 flex items-center gap-1",children:p}),h&&e.jsx(S,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:v,children:e.jsx(W,{className:"h-4 w-4"})})]}),y&&e.jsx(U,{})]}),e.jsx("div",{className:k("flex-1",j&&"overflow-y-auto overflow-x-hidden",!u&&g[s],u&&s==="default"&&"p-4",u&&s==="compact"&&"p-3",u&&s==="mini"&&"p-2"),children:E}),b&&e.jsxs(e.Fragment,{children:[e.jsx(U,{}),e.jsx("div",{className:g[s],children:b})]})]})}/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ae=_("triangle-alert",oe);function ie({tabs:s,defaultTab:c,onTabChange:a,className:l=""}){const i=c||s[0]?.id;return e.jsx("div",{className:`w-full ${l}`,children:e.jsxs(Q,{defaultValue:i,onValueChange:a,className:"w-full",children:[e.jsx(Y,{className:`grid w-full grid-cols-${s.length} mb-4`,children:s.map(o=>{const p=o.icon;return e.jsxs(ee,{value:o.id,disabled:o.disabled,className:"flex items-center gap-2",children:[p&&e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{children:o.label})]},o.id)})}),s.map(o=>e.jsx(ne,{value:o.id,className:"mt-0 focus:outline-none",children:o.content},o.id))]})})}function n(s,c,a=null){const i=`[Popup Debug ${new Date().toISOString().split("T")[1].slice(0,-1)}]`;a?console[s](`${i} ${c}`,a):console[s](`${i} ${c}`)}function re({extensionName:s,extensionIcon:c,size:a="lg",variant:l="default",className:i="",customLogo:o,customActions:p,footerContent:m,onSettingsClick:h,onExtensionToggle:y}){n("info","🚀 PopupWrapper initializing");const[C,v]=T.useState(""),[b,j]=T.useState(!0),[d,E]=T.useState({appName:"Comet Extension",appIcon:"Zap",popupOverrideLogoText:""}),[L,O]=T.useState(null),{popupTabs:r,loading:g,currentTab:u,extensionEnabled:F}=q();n("info","📊 Module discovery state:",{popupTabsCount:r.length,loading:g,currentTab:u?.url,extensionEnabled:F}),T.useEffect(()=>{n("info","🔄 Starting popup initialization"),M()},[r]);const M=async()=>{try{n("info","📚 Loading extension state and configuration"),n("info","🔍 Loading extension enabled state");const t=await x.get("extensionEnabled",!0);j(t),n("info",`✅ Extension enabled: ${t}`),n("info","🔍 Loading app configuration");const f=await x.get("app-name","Comet Extension"),I=await x.get("app-icon","Zap"),A=await x.get("popup-logoOverrideText","Comet One");if(n("info","✅ App configuration loaded:",{appName:f,appIcon:I,popupOverrideLogoText:A}),E({appName:f,appIcon:I,popupOverrideLogoText:A}),r.length>0){n("info",`📑 Setting up tabs (${r.length} available)`),n("info","Available tabs:",r.map(P=>({id:P.id,label:P.label})));const z=await x.get("popup.activeTab",r[0].id),R=r.find(P=>P.id===z)?z:r[0].id;v(R),n("info",`✅ Active tab set to: ${R}`)}else n("warn","⚠️ No popup tabs available");n("info","✅ Popup initialization complete")}catch(t){n("error","❌ Popup initialization failed:",t),O(t.message),E({appName:"Comet Extension",appIcon:"Zap",popupOverrideLogoText:"Comet One"}),j(!0),v("")}},B=async t=>{n("info",`🔄 Toggling extension enabled state to: ${t}`),j(t);try{await x.set("extensionEnabled",t),n("info",`✅ Extension enabled state saved: ${t}`),y?.(t)}catch(f){n("error","❌ Failed to save extension enabled state:",f)}},D=t=>{n("info",`🔄 Changing active tab to: ${t}`),v(t);try{x.set("popup.activeTab",t),n("info",`✅ Active tab saved: ${t}`)}catch(f){n("error","❌ Failed to save active tab:",f)}},Z=()=>{n("info","⚙️ Settings button clicked"),h?h():typeof chrome<"u"&&chrome.runtime&&chrome.runtime.openOptionsPage?(n("info","🌐 Opening options page via Chrome API"),chrome.runtime.openOptionsPage()):typeof browser<"u"&&browser.runtime&&browser.runtime.openOptionsPage?(n("info","🌐 Opening options page via Browser API"),browser.runtime.openOptionsPage()):n("warn","⚠️ Options page API not available")},N=o||(()=>{n("info","🎨 Generating logo component");let t={size:"md"};return s?(t.overrideName=s,n("info",`📝 Using extensionName prop: ${s}`)):typeof d.popupOverrideLogoText=="string"&&d.popupOverrideLogoText.length>0?(t.overrideName=d.popupOverrideLogoText,n("info",`📝 Using popup override text: ${d.popupOverrideLogoText}`)):(t.name=d.appName,n("info",`📝 Using app name: ${d.appName}`)),c?(t.icon=c,n("info",`🎨 Using extensionIcon prop: ${c}`)):t.overrideName?(t.icon=void 0,n("info","🎨 No icon (override name mode)")):(t.icon=d.appIcon,n("info",`🎨 Using app icon: ${d.appIcon}`)),n("info","✅ Logo component props:",t),e.jsx(G,{...t})})(),w=p||e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:"ghost",size:"sm",onClick:Z,className:"h-6 w-6 p-0 text-muted-foreground  ",children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx(X,{checked:b,onCheckedChange:B})]});return g?(n("info","⏳ Rendering loading state"),e.jsx($,{size:a,variant:l,className:`border-0 ${i}`,logo:N,headerActions:w,footer:m,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(te,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),e.jsx("div",{className:"text-sm",children:"Loading..."})]})})):L?(n("error","❌ Rendering error state"),e.jsx($,{size:a,variant:l,className:`border-0 ${i}`,logo:N,headerActions:w,footer:m,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(ae,{className:"h-6 w-6 mx-auto mb-2 text-destructive"}),e.jsx("div",{className:"text-sm",children:"Initialization Error"}),e.jsx("div",{className:"text-xs mt-1 text-destructive",children:L})]})})):b?r.length===0?(n("warn","⚠️ Rendering no features state"),e.jsx($,{size:a,variant:l,className:`border-0 ${i}`,logo:N,headerActions:w,footer:m,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("div",{className:"text-sm",children:"No features available"}),e.jsx("div",{className:"text-xs mt-1",children:"Check settings or current page"})]})})):(n("info","✅ Rendering main popup interface"),n("info",`📑 Active tab: ${C}`),n("info",`📊 Total tabs: ${r.length}`),e.jsx($,{variant:l,size:a,className:`border-0 rounded-none ${i}`,logo:N,headerActions:w,footer:m,scrollable:!0,children:e.jsx(ie,{tabs:r,defaultTab:C,onTabChange:D})})):(n("info","🚫 Rendering disabled state"),e.jsx($,{size:a,variant:l,className:`border-0 ${i}`,logo:N,headerActions:w,footer:m,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("div",{className:"text-sm",children:"Extension is disabled"}),e.jsx("div",{className:"text-xs mt-1",children:"Toggle above to enable"})]})}))}function le(){return e.jsx(re,{})}function ce(){return e.jsx(J,{theme:"metro",variant:"light",detectSystem:!1,children:e.jsx(le,{})})}const de=K.createRoot(document.getElementById("root"));de.render(e.jsx(ce,{}));
//# sourceMappingURL=popup.js.map
