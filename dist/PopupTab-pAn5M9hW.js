import{r as n,j as e,Q as g,B as h,S as j,k as N,l as Q,R as y}from"./index-CriA-yGf.js";import{c as v,L as C}from"./tabs-DeYq6__c.js";import{C as b,a as w,c as T,b as S}from"./card-Dc79FipO.js";import{A as q,a as G}from"./alert-x4edTDyv.js";import{B as m}from"./badge-YMIwrmNd.js";import{s as A}from"./storage-Bz8_X7E-.js";import{R as B}from"./refresh-cw-Dr7dOsjg.js";import{C as E,a as L}from"./circle-check-big-D4JixKUs.js";function R({result:t,onDismiss:s}){if(y.useEffect(()=>{if(t&&s){const a=setTimeout(s,2e3);return()=>clearTimeout(a)}},[t,s]),!t)return null;const c=t.type==="success"?E:L,l=t.type==="success"?"default":"destructive";return e.jsxs(q,{variant:l,children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx(G,{children:t.message})]})}function z({value:t}){const[s,c]=n.useState(!1),[l,a]=n.useState(null),[r,x]=n.useState(null),[i,p]=n.useState("general");n.useEffect(()=>{A.get("quoteGenerator.type","general").then(p)},[]);const f=async()=>{console.log("[Quote PopupTab] 🚀 Getting quote, type:",i),c(!0),a(null);try{const o=i==="motivational"?await N():await Q();console.log("[Quote PopupTab] ✅ Quote received:",o),x(o),a({type:"success",message:o.source==="api"?"Quote fetched!":"Offline quote"})}catch(o){console.error("[Quote PopupTab] ❌ Error:",o),a({type:"error",message:"Failed to get quote"})}finally{c(!1)}},u={general:{title:"General Quote",desc:"Wisdom and life advice"},motivational:{title:"Motivational Quote",desc:"Inspiring messages"}},d=u[i]||u.general;return e.jsx(v,{value:t,className:"mt-0",children:e.jsxs(b,{children:[e.jsxs(w,{className:"pb-3",children:[e.jsxs(T,{className:"text-base flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),d.title]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d.desc})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsx(h,{onClick:f,disabled:s,className:"w-full",children:s?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),"Getting Quote..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Get New Quote"]})}),e.jsx(R,{result:l,onDismiss:()=>a(null)}),r&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded border",children:[e.jsxs("div",{className:"text-sm italic mb-3 leading-relaxed",children:['"',r.text,'"']}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["— ",r.author]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",className:"text-xs",children:r.category}),e.jsx(m,{variant:r.source==="api"?"default":"secondary",className:"text-xs",children:r.source==="api"?"Live":"Offline"})]})]})]})]}),e.jsx("p",{className:"text-center text-xs text-muted-foreground",children:"Change quote type in settings"})]})]})})}export{z as default};
//# sourceMappingURL=PopupTab-pAn5M9hW.js.map
