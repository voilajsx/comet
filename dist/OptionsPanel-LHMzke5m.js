import{f as P,r as l,j as e,d as G,S as U,B as v,i as T}from"./index-ppmD041L.js";import{C as u,a as m,b as h,c as j}from"./card-DvemRyrq.js";import{L as x}from"./label-CgYLQpLB.js";import{M as I,I as A}from"./input-PVSLrBm2.js";import{S as L,a as D,b as E,c as O,d as S}from"./select-CGt40ohK.js";import{A as R,a as k}from"./alert-CrZN6C-8.js";import{s as a}from"./storage-Dee3qOXW.js";import{C as H,a as M}from"./circle-check-big-BsxXJ8aq.js";/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],B=P("thermometer",z);function V({status:s,onDismiss:r}){if(l.useEffect(()=>{if(s){const c=setTimeout(r,3e3);return()=>clearTimeout(c)}},[s,r]),!s)return null;const p=s.type==="success"?H:M;return e.jsxs(R,{variant:s.type==="success"?"default":"destructive",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx(k,{children:s.message})]})}function Y(){const[s,r]=l.useState({defaultCity:"Hyderabad",useGPS:!0,temperatureUnit:"celsius"}),[p,c]=l.useState(!0),[d,o]=l.useState(!1),[N,i]=l.useState(null),[g,f]=l.useState("");l.useEffect(()=>{C()},[]);const C=async()=>{try{c(!0);const t={defaultCity:await a.get("weatherWidget.defaultCity","Hyderabad"),useGPS:await a.get("weatherWidget.useGPS",!0),temperatureUnit:await a.get("weatherWidget.temperatureUnit","celsius")};r(t),f(t.defaultCity)}catch(t){console.error("[Weather Options] Failed to load settings:",t),i({type:"error",message:"Failed to load settings"})}finally{c(!1)}},w=async()=>{try{o(!0);const t=g.trim();if(!t){i({type:"error",message:"City name cannot be empty"});return}const n={...s,defaultCity:t};await a.set("weatherWidget.defaultCity",n.defaultCity),await a.set("weatherWidget.useGPS",n.useGPS),await a.set("weatherWidget.temperatureUnit",n.temperatureUnit),r(n),i({type:"success",message:"Settings saved successfully!"})}catch(t){console.error("[Weather Options] Failed to save settings:",t),i({type:"error",message:"Failed to save settings"})}finally{o(!1)}},y=async(t,n)=>{const W={...s,[t]:n};r(W);try{await a.set(`weatherWidget.${t}`,n)}catch(F){console.error(`[Weather Options] Failed to save ${t}:`,F),i({type:"error",message:`Failed to save ${t} setting`})}},b=async()=>{try{o(!0);const t={defaultCity:"Hyderabad",useGPS:!0,temperatureUnit:"celsius"};await a.set("weatherWidget.defaultCity",t.defaultCity),await a.set("weatherWidget.useGPS",t.useGPS),await a.set("weatherWidget.temperatureUnit",t.temperatureUnit),r(t),f(t.defaultCity),i({type:"success",message:"Settings reset to defaults"})}catch(t){console.error("[Weather Options] Failed to reset settings:",t),i({type:"error",message:"Failed to reset settings"})}finally{o(!1)}};return p?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-8 w-48 bg-muted animate-pulse rounded mb-2"}),e.jsx("div",{className:"h-4 w-64 bg-muted animate-pulse rounded"})]}),e.jsxs(u,{children:[e.jsx(m,{children:e.jsx("div",{className:"h-6 w-32 bg-muted animate-pulse rounded"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-12 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-12 bg-muted animate-pulse rounded"})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Weather Widget Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure weather information display and location preferences"})]}),e.jsx(V,{status:N,onDismiss:()=>i(null)}),e.jsxs(u,{children:[e.jsx(m,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Location Settings"]})}),e.jsxs(h,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(x,{htmlFor:"use-gps",className:"text-sm font-medium",children:"Use GPS Location"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically detect your location for weather"})]}),e.jsx(G,{id:"use-gps",checked:s.useGPS,onCheckedChange:t=>y("useGPS",t)})]}),e.jsx(U,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{htmlFor:"default-city",className:"text-sm font-medium",children:"Default City"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fallback city when GPS is unavailable or disabled"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{id:"default-city",value:g,onChange:t=>f(t.target.value),placeholder:"Enter city name",className:"flex-1"}),e.jsx(v,{onClick:w,disabled:d||g.trim()===s.defaultCity,size:"sm",children:d?"Saving...":"Save"})]})]})]})]}),e.jsxs(u,{children:[e.jsx(m,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Display Settings"]})}),e.jsx(h,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{htmlFor:"temperature-unit",className:"text-sm font-medium",children:"Temperature Unit"}),e.jsxs(L,{value:s.temperatureUnit,onValueChange:t=>y("temperatureUnit",t),children:[e.jsx(D,{id:"temperature-unit",children:e.jsx(E,{})}),e.jsxs(O,{children:[e.jsx(S,{value:"celsius",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Celsius (°C)"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Metric temperature scale"})]})}),e.jsx(S,{value:"fahrenheit",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Fahrenheit (°F)"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Imperial temperature scale"})]})})]})]})]})})]}),e.jsxs(u,{children:[e.jsx(m,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Advanced"]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(x,{className:"text-sm font-medium",children:"Reset to Defaults"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Restore all settings to their default values"})]}),e.jsx(v,{variant:"outline",onClick:b,disabled:d,size:"sm",children:d?"Resetting...":"Reset"})]})})]})]})}export{Y as default};
//# sourceMappingURL=OptionsPanel-LHMzke5m.js.map
