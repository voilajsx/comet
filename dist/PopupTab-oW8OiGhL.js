import{r as v,m as b,j as e,F as w,B as d,l as o,S as C,G as z}from"./index-Bo8_xHZ6.js";import{c as A}from"./tabs-Akza8dl_.js";import{C as T,a as V,c as F,b as S}from"./card-Jgq_BCpJ.js";import{A as k,a as B}from"./alert-De4vzj2J.js";import{B as x}from"./badge-DxbPOCLi.js";import{u as L,C as p}from"./usePageAnalyzer-D9dzDrjy.js";import{L as u}from"./loader-circle-Dca1WqDI.js";import{C as P,a as H}from"./circle-check-big-BN7GbFpw.js";import"./storage-CVg25cfU.js";import"./api-D1xaP6EM.js";function O({value:h,currentTab:j}){const{pageData:l,validationResult:a,settings:g,analyzePageSize:f,validateHTML:y,loading:i}=L(),[n,s]=v.useState(null),r=b.isTabSupported(j),N=async()=>{if(!r){s({type:"error",message:"Not available on this page"});return}const t=await f();t.success?(s({type:"success",message:"Analysis complete!"}),g.autoValidate&&setTimeout(()=>m(),1e3)):s({type:"error",message:t.error}),setTimeout(()=>s(null),3e3)},m=async()=>{if(!r){s({type:"error",message:"Not available on this page"});return}const t=await y();if(t.success){const c=t.data.errors;s({type:c===0?"success":"warning",message:c===0?"Valid HTML!":`${c} errors found`})}else s({type:"error",message:t.error});setTimeout(()=>s(null),3e3)};return e.jsx(A,{value:h,className:"mt-0",children:e.jsxs(T,{children:[e.jsx(V,{className:"pb-4",children:e.jsxs(F,{className:"text-base flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"Page Analysis & Validation"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{onClick:N,disabled:i.analyze||!r,className:"w-full",children:i.analyze?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Analyze Page Size"]})}),e.jsx(d,{onClick:m,disabled:i.validate||!r,variant:"outline",className:"w-full",children:i.validate?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"h-4 w-4 mr-2 animate-spin"}),"Validating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Validate HTML"]})})]}),n&&e.jsxs(k,{variant:n.type==="success"?"default":"destructive",children:[n.type==="success"?e.jsx(P,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"}),e.jsx(B,{class:"pt-1",children:n.message})]}),(l||a)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(C,{}),l&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:l.domain})]}),e.jsx(x,{variant:"secondary",children:l.size})]}),a&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:a.domain})]}),e.jsx(x,{variant:a.isValid?"default":"destructive",children:a.isValid?"Valid":`${a.errors} errors`})]})]}),!r&&e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(z,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("div",{className:"text-sm",children:"Not available on this page type"})]})]})]})})}export{O as default};
//# sourceMappingURL=PopupTab-oW8OiGhL.js.map
