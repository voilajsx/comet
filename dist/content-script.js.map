{"version":3,"file":"content-script.js","sources":["../src/features/page-analyzer/index.js","../src/platform/api.js","../src/features/quote-generator/index.js","../src/platform/content-script.js"],"sourcesContent":["/**\n * Page Analyzer Feature Module (Simplified - Page Size Only)\n * Analyzes basic page size information\n * @module @voilajsx/comet\n * @file src/features/page-analyzer/index.js\n */\n\n/**\n * Get page size information\n * @returns {object} Page size data with multiple metrics\n */\nfunction getPageSize() {\n  const html = document.documentElement.outerHTML;\n  const text = document.body.innerText || '';\n  const images = document.images.length;\n  const links = document.links.length;\n\n  return {\n    htmlBytes: new Blob([html]).size,\n    textBytes: new Blob([text]).size,\n    formatted: formatBytes(new Blob([html]).size),\n    images,\n    links,\n    timestamp: Date.now(),\n  };\n}\n\n/**\n * Format bytes to readable string\n * @param {number} bytes - Bytes to format\n * @returns {string} Formatted string\n */\nfunction formatBytes(bytes) {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n}\n\n/**\n * Page Analyzer Feature Module Configuration (Simplified)\n */\nconst pageAnalyzerModule = {\n  name: 'pageAnalyzer',\n\n  // Message handlers this feature provides\n  handlers: {\n    getPageSize: () => getPageSize(),\n  },\n\n  // Main action for combined operations\n  mainAction: () => getPageSize(),\n\n  // Feature initialization\n  init: () => {\n    console.log('[Page Analyzer] Simple feature initialized - page size only');\n  },\n\n  // Feature metadata\n  meta: {\n    name: 'Page Analyzer',\n    description: 'Analyzes basic page size information',\n    version: '1.0.0',\n    permissions: [], // No special permissions needed\n  },\n};\n\n// Export the feature module\nexport default pageAnalyzerModule;\n","/**\n * Comet Framework - Universal API utilities\n * Clean API proxy that works from any extension context\n * @module @voilajsx/comet\n * @file src/platform/api.js\n */\n\n/**\n * Universal API utilities that work from any extension context\n * Routes through service worker to avoid CORS issues\n */\nexport const comet = {\n  // Base fetch method\n  async fetch(url, options = {}) {\n    try {\n      const response = await new Promise((resolve, reject) => {\n        chrome.runtime.sendMessage(\n          {\n            type: 'api.fetch',\n            data: {\n              url,\n              method: options.method || 'GET',\n              headers: options.headers || {},\n              body: options.body || null,\n              timeout: options.timeout || 30000,\n            },\n          },\n          (response) => {\n            if (chrome.runtime.lastError) {\n              reject(new Error(chrome.runtime.lastError.message));\n            } else {\n              resolve(response);\n            }\n          }\n        );\n      });\n\n      return {\n        ok: response.success,\n        status: response.status,\n        json: () => Promise.resolve(response.data),\n        data: response.data,\n        error: response.error,\n      };\n    } catch (error) {\n      return {\n        ok: false,\n        status: 0,\n        error: error.message,\n        json: () => Promise.reject(error),\n      };\n    }\n  },\n\n  // REST convenience methods\n  async get(url, headers = {}) {\n    return this.fetch(url, { method: 'GET', headers });\n  },\n\n  async post(url, data = null, headers = {}) {\n    return this.fetch(url, {\n      method: 'POST',\n      body: data,\n      headers,\n    });\n  },\n\n  async put(url, data = null, headers = {}) {\n    return this.fetch(url, {\n      method: 'PUT',\n      body: data,\n      headers,\n    });\n  },\n\n  async patch(url, data = null, headers = {}) {\n    return this.fetch(url, {\n      method: 'PATCH',\n      body: data,\n      headers,\n    });\n  },\n\n  async delete(url, headers = {}) {\n    return this.fetch(url, { method: 'DELETE', headers });\n  },\n};\n","/**\n * Quote Generator Feature Module - Simplified\n * Fetches inspirational quotes with basic fallback\n * @module @voilajsx/comet\n * @file src/features/quote-generator/index.js\n */\n\nimport { comet } from '@voilajsx/comet/api';\n\n/**\n * Quote Generator Module Configuration\n */\nconst quoteGeneratorModule = {\n  name: 'quoteGenerator',\n\n  handlers: {\n    getQuote: () => getRandomQuote(),\n    getMotivationalQuote: () => getMotivationalQuote(),\n  },\n\n  mainAction: () => getRandomQuote(),\n\n  init: () => {\n    console.log('[Quote Generator] Feature initialized');\n  },\n\n  meta: {\n    name: 'Quote Generator',\n    description: 'Simple inspirational quotes',\n    version: '1.0.0',\n    permissions: [],\n  },\n};\n\n/**\n * Get a random quote with basic fallback\n * @returns {Promise<object>} Quote result\n */\nasync function getRandomQuote() {\n  // Try primary API first\n  try {\n    console.log('[Quote Generator] Fetching quote from API');\n\n    const response = await comet.get('https://api.adviceslip.com/advice');\n\n    if (response.ok && response.data?.slip?.advice) {\n      return {\n        success: true,\n        quote: {\n          text: response.data.slip.advice,\n          author: 'Anonymous',\n          category: 'advice',\n          timestamp: Date.now(),\n        },\n      };\n    }\n  } catch (error) {\n    console.warn('[Quote Generator] API failed:', error);\n  }\n\n  // Fallback to local quotes\n  return {\n    success: false,\n    error: 'API unavailable',\n    fallbackQuote: getFallbackQuote(),\n  };\n}\n\n/**\n * Get motivational quote\n * @returns {Promise<object>} Motivational quote result\n */\nasync function getMotivationalQuote() {\n  const result = await getRandomQuote();\n\n  if (result.success) {\n    result.quote.category = 'motivational';\n  } else {\n    result.fallbackQuote = getMotivationalFallback();\n  }\n\n  return result;\n}\n\n/**\n * Fallback quotes when API is unavailable\n * @private\n */\nfunction getFallbackQuote() {\n  const quotes = [\n    {\n      text: 'The only way to do great work is to love what you do.',\n      author: 'Steve Jobs',\n    },\n    {\n      text: \"Life is what happens while you're busy making other plans.\",\n      author: 'John Lennon',\n    },\n    {\n      text: 'The future belongs to those who believe in their dreams.',\n      author: 'Eleanor Roosevelt',\n    },\n  ];\n\n  const quote = quotes[Math.floor(Math.random() * quotes.length)];\n  return {\n    ...quote,\n    category: 'wisdom',\n    source: 'fallback',\n    timestamp: Date.now(),\n  };\n}\n\n/**\n * Motivational fallback quotes\n * @private\n */\nfunction getMotivationalFallback() {\n  const quotes = [\n    {\n      text: 'Success is not final, failure is not fatal: it is the courage to continue that counts.',\n      author: 'Winston Churchill',\n    },\n    {\n      text: 'The only impossible journey is the one you never begin.',\n      author: 'Tony Robbins',\n    },\n    {\n      text: \"Don't watch the clock; do what it does. Keep going.\",\n      author: 'Sam Levenson',\n    },\n  ];\n\n  const quote = quotes[Math.floor(Math.random() * quotes.length)];\n  return {\n    ...quote,\n    category: 'motivational',\n    source: 'fallback',\n    timestamp: Date.now(),\n  };\n}\n\nexport default quoteGeneratorModule;\n","/**\n * Comet Framework - Essential Content Script\n * Auto-discovers modules from scripts/modules/ folder\n * @module @voilajsx/comet\n * @file src/platform/content-script.js\n */\n\n// AUTO-DISCOVERY - Modules are auto-loaded\nimport * as modules from '../features/index.js';\nconst ALL_MODULES = Object.values(modules);\n\n/**\n * Essential Comet Content Script Manager\n * Simple and reliable module registration with message handling\n */\nclass CometContentScriptManager {\n  constructor() {\n    this.isInitialized = false;\n    this.modules = new Map();\n    this.messageHandlers = new Map();\n    this.moduleRegistry = new Map();\n\n    this.initialize();\n  }\n\n  async initialize() {\n    if (this.isInitialized) return;\n\n    console.log('[Comet Content] Loading on:', window.location.href);\n\n    try {\n      this.setupMessageHandling();\n      this.registerCoreHandlers();\n      this.loadModules();\n      this.notifyReady();\n      this.isInitialized = true;\n\n      console.log(\n        `[Comet Content] Initialized with ${this.modules.size} modules:`,\n        Array.from(this.modules.keys())\n      );\n    } catch (error) {\n      console.error('[Comet Content] Initialization error:', error);\n      this.isInitialized = true;\n    }\n  }\n\n  setupMessageHandling() {\n    try {\n      chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n        this.handleMessage(message, sender, sendResponse);\n        return true; // Keep message channel open for async responses\n      });\n    } catch (error) {\n      console.warn('[Comet Content] Message handling setup failed:', error);\n    }\n  }\n\n  registerCoreHandlers() {\n    // Core framework handlers\n    this.registerHandler('ping', () => ({\n      success: true,\n      ready: true,\n      url: window.location.href,\n      timestamp: Date.now(),\n      modules: Array.from(this.modules.keys()),\n      moduleCount: this.modules.size,\n    }));\n\n    this.registerHandler('getPageInfo', () => ({\n      url: window.location.href,\n      title: document.title,\n      hostname: window.location.hostname,\n      timestamp: Date.now(),\n    }));\n\n    this.registerHandler('getModules', () => ({\n      modules: Array.from(this.modules.keys()),\n      handlers: Array.from(this.messageHandlers.keys()),\n      moduleCount: this.modules.size,\n    }));\n\n    this.registerHandler('performMainAction', (data) =>\n      this.performCombinedAction(data)\n    );\n  }\n\n  loadModules() {\n    console.log('[Comet Content] Loading modules...');\n\n    let loadedCount = 0;\n    for (const moduleData of ALL_MODULES) {\n      try {\n        if (moduleData && this.isValidModule(moduleData)) {\n          this.registerModule(moduleData);\n          loadedCount++;\n        }\n      } catch (error) {\n        console.warn('[Comet Content] Failed to register module:', error);\n      }\n    }\n\n    console.log(\n      `[Comet Content] Loaded ${loadedCount}/${ALL_MODULES.length} modules`\n    );\n  }\n\n  registerModule(moduleConfig) {\n    try {\n      const name = moduleConfig.name;\n\n      if (this.modules.has(name)) {\n        console.warn(\n          `[Comet Content] Module \"${name}\" already registered, skipping`\n        );\n        return;\n      }\n\n      this.modules.set(name, moduleConfig);\n\n      // Register module handlers\n      if (moduleConfig.handlers) {\n        Object.entries(moduleConfig.handlers).forEach(\n          ([handlerName, handlerFunc]) => {\n            if (typeof handlerFunc === 'function') {\n              // Check for conflicts\n              if (this.messageHandlers.has(handlerName)) {\n                const existingModule = this.moduleRegistry.get(handlerName);\n                console.warn(\n                  `[Comet Content] Handler \"${handlerName}\" conflict: Module \"${name}\" vs existing \"${existingModule}\", skipping`\n                );\n                return;\n              }\n\n              this.registerHandler(handlerName, handlerFunc);\n              this.moduleRegistry.set(handlerName, name);\n            }\n          }\n        );\n      }\n\n      // Initialize module\n      if (typeof moduleConfig.init === 'function') {\n        try {\n          moduleConfig.init();\n        } catch (error) {\n          console.warn(`[Comet Content] Module \"${name}\" init failed:`, error);\n        }\n      }\n\n      console.log(`[Comet Content] Module \"${name}\" registered successfully`);\n    } catch (error) {\n      console.error('[Comet Content] Module registration failed:', error);\n    }\n  }\n\n  isValidModule(moduleConfig) {\n    return !!(\n      moduleConfig &&\n      typeof moduleConfig === 'object' &&\n      moduleConfig.name &&\n      typeof moduleConfig.name === 'string' &&\n      (moduleConfig.handlers || moduleConfig.mainAction)\n    );\n  }\n\n  registerHandler(type, handler) {\n    if (typeof handler !== 'function') {\n      throw new Error(`Handler for \"${type}\" must be a function`);\n    }\n\n    this.messageHandlers.set(type, handler);\n  }\n\n  async handleMessage(message, sender, sendResponse) {\n    try {\n      const { type, data, id } = message;\n\n      if (!type) {\n        sendResponse({ success: false, error: 'Message type required' });\n        return;\n      }\n\n      console.log(`[Comet Content] Message: ${type}`, data);\n\n      const handler = this.messageHandlers.get(type);\n      if (!handler) {\n        sendResponse({\n          success: false,\n          error: `No handler for: ${type}`,\n          availableHandlers: Array.from(this.messageHandlers.keys()),\n          moduleCount: this.modules.size,\n        });\n        return;\n      }\n\n      const result = await this.executeHandler(handler, data, sender);\n      const moduleOwner = this.moduleRegistry.get(type);\n\n      sendResponse({\n        success: true,\n        data: result,\n        module: moduleOwner,\n        id,\n      });\n    } catch (error) {\n      console.error('[Comet Content] Message handling error:', error);\n      sendResponse({\n        success: false,\n        error: error.message || 'Internal error',\n        id: message.id,\n      });\n    }\n  }\n\n  async executeHandler(handler, data, sender) {\n    try {\n      return await handler(data, sender);\n    } catch (error) {\n      console.error('[Comet Content] Handler execution error:', error);\n      throw error;\n    }\n  }\n\n  async performCombinedAction(data) {\n    const results = {};\n    const errors = {};\n\n    for (const [moduleName, moduleConfig] of this.modules) {\n      try {\n        if (typeof moduleConfig.mainAction === 'function') {\n          results[moduleName] = await moduleConfig.mainAction(data);\n        } else if (typeof moduleConfig.analyze === 'function') {\n          results[moduleName] = await moduleConfig.analyze(data);\n        }\n      } catch (error) {\n        errors[moduleName] = error.message;\n        console.warn(`[Comet Content] Module \"${moduleName}\" failed:`, error);\n      }\n    }\n\n    return {\n      success: Object.keys(errors).length === 0,\n      message: `Combined action completed across ${\n        Object.keys(results).length\n      } modules`,\n      results,\n      errors: Object.keys(errors).length > 0 ? errors : undefined,\n      timestamp: Date.now(),\n      url: window.location.href,\n    };\n  }\n\n  notifyReady() {\n    try {\n      chrome.runtime.sendMessage({\n        type: 'contentScriptReady',\n        data: {\n          url: window.location.href,\n          modules: Array.from(this.modules.keys()),\n          moduleCount: this.modules.size,\n          timestamp: Date.now(),\n        },\n      });\n    } catch (error) {\n      console.warn('[Comet Content] Failed to notify service worker:', error);\n    }\n  }\n\n  // Debug helper\n  getInfo() {\n    return {\n      modules: Array.from(this.modules.keys()),\n      handlers: Array.from(this.messageHandlers.keys()),\n      moduleCount: this.modules.size,\n      url: window.location.href,\n      initialized: this.isInitialized,\n    };\n  }\n}\n\n// Initialize the content script manager\nconst contentScriptManager = new CometContentScriptManager();\n\n// Export for debugging\nif (typeof globalThis !== 'undefined') {\n  globalThis.contentScriptManager = contentScriptManager;\n}\n"],"names":["getPageSize","html","text","images","links","formatBytes","bytes","k","sizes","i","pageAnalyzerModule","comet","url","options","response","resolve","reject","error","headers","data","quoteGeneratorModule","getRandomQuote","getMotivationalQuote","getFallbackQuote","result","getMotivationalFallback","quotes","ALL_MODULES","CometContentScriptManager","message","sender","sendResponse","loadedCount","moduleData","moduleConfig","name","handlerName","handlerFunc","existingModule","type","handler","id","moduleOwner","results","errors","moduleName","contentScriptManager"],"mappings":"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"}