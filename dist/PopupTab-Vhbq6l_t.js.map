{"version":3,"file":"PopupTab-Vhbq6l_t.js","sources":["../node_modules/lucide-react/dist/esm/icons/chart-column.js","../node_modules/lucide-react/dist/esm/icons/triangle-alert.js","../src/features/page-analyzer/components/PopupTab.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.516.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 3v16a2 2 0 0 0 2 2h16\", key: \"c24i48\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n];\nconst ChartColumn = createLucideIcon(\"chart-column\", __iconNode);\n\nexport { __iconNode, ChartColumn as default };\n//# sourceMappingURL=chart-column.js.map\n","/**\n * @license lucide-react v0.516.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", __iconNode);\n\nexport { __iconNode, TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * Page Analyzer Popup Tab Component - Updated with Settings Integration\n * @module @voilajsx/comet\n * @file src/features/page-analyzer/components/PopupTab.tsx\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { TabsContent } from '@voilajsx/uikit/tabs';\nimport { Card, CardContent, CardHeader, CardTitle } from '@voilajsx/uikit/card';\nimport { Button } from '@voilajsx/uikit/button';\nimport { Alert, AlertDescription } from '@voilajsx/uikit/alert';\nimport { Separator } from '@voilajsx/uikit/separator';\nimport { FileText, Loader2, AlertTriangle, BarChart3, CheckCircle, AlertCircle } from 'lucide-react';\nimport { messaging } from '@voilajsx/comet/messaging';\nimport { storage } from '@voilajsx/comet/storage';\n\n/**\n * Built-in ActionResult component\n */\nfunction ActionResult({ \n  result, \n  onDismiss, \n  autoDismiss = true, \n  autoDismissDelay = 3000 \n}) {\n  React.useEffect(() => {\n    if (result && autoDismiss && onDismiss) {\n      const timer = setTimeout(onDismiss, autoDismissDelay);\n      return () => clearTimeout(timer);\n    }\n  }, [result, autoDismiss, autoDismissDelay, onDismiss]);\n\n  if (!result) return null;\n\n  const getAlertConfig = () => {\n    switch (result.type) {\n      case 'success':\n        return {\n          icon: CheckCircle,\n          variant: 'default',\n          iconColor: 'text-green-500'\n        };\n      case 'error':\n        return {\n          icon: AlertCircle,\n          variant: 'destructive',\n          iconColor: 'text-destructive'\n        };\n      default:\n        return {\n          icon: AlertCircle,\n          variant: 'default',\n          iconColor: 'text-muted-foreground'\n        };\n    }\n  };\n\n  const { icon: Icon, variant, iconColor } = getAlertConfig();\n\n  return (\n    <Alert variant={variant} className=\"border-border\">\n      <Icon className={`h-4 w-4 ${iconColor}`} />\n      <AlertDescription className=\"text-sm pt-1\">\n        {result.message}\n      </AlertDescription>\n    </Alert>\n  );\n}\n\nexport default function PageAnalyzerTab({ value, currentTab }) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [analyzerResult, setAnalyzerResult] = useState(null);\n  const [pageSizeData, setPageSizeData] = useState(null);\n  const [settings, setSettings] = useState({\n    showDetailedView: true,\n    autoAnalyze: false\n  });\n\n  const canAnalyze = messaging.isTabSupported(currentTab);\n\n  // Load settings on mount\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  // Auto analyze if enabled\n  useEffect(() => {\n    if (settings.autoAnalyze && canAnalyze && !pageSizeData) {\n      handleAnalyzePage();\n    }\n  }, [settings.autoAnalyze, canAnalyze]);\n\n  const loadSettings = async () => {\n    try {\n      const showDetailedView = await storage.get('pageAnalyzer.showDetailedView', true);\n      const autoAnalyze = await storage.get('pageAnalyzer.autoAnalyze', false);\n      setSettings({ showDetailedView, autoAnalyze });\n    } catch (error) {\n      console.error('[Page Analyzer Popup] Failed to load settings:', error);\n    }\n  };\n\n  const handleAnalyzePage = async () => {\n    if (!canAnalyze) {\n      setAnalyzerResult({\n        type: 'error',\n        message: 'Page analysis not available on this page type'\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    setAnalyzerResult(null);\n\n    try {\n      const response = await messaging.sendToContent({\n        type: 'getPageSize',\n        data: {}\n      });\n\n      if (response?.success) {\n        setPageSizeData(response.data);\n        setAnalyzerResult({\n          type: 'success',\n          message: 'Page analyzed successfully!'\n        });\n      } else {\n        setAnalyzerResult({\n          type: 'error',\n          message: response?.error || 'Analysis failed'\n        });\n      }\n    } catch (error) {\n      setAnalyzerResult({\n        type: 'error',\n        message: 'Could not analyze page size'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <TabsContent value={value} className=\"mt-0\">\n      <Card className=\"bg-card border-border\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base text-card-foreground flex items-center gap-2\">\n            <FileText className=\"w-4 h-4\" />\n            Page Size Analysis\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          \n          {/* Analyze Button */}\n          <Button\n            onClick={handleAnalyzePage}\n            disabled={isLoading}\n            className=\"w-full\"\n            variant={canAnalyze ? 'default' : 'secondary'}\n          >\n            {isLoading ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Analyzing Page Size...\n              </>\n            ) : (\n              <>\n                <BarChart3 className=\"w-4 h-4 mr-2\" />\n                {canAnalyze ? 'Analyze Page Size' : 'Analysis Not Available'}\n              </>\n            )}\n          </Button>\n\n          {/* Result Status */}\n          <ActionResult\n            result={analyzerResult}\n            onDismiss={() => setAnalyzerResult(null)}\n            autoDismiss={true}\n            autoDismissDelay={3000}\n          />\n\n          {/* Analysis Results */}\n          {pageSizeData && (\n            <div className=\"space-y-3 text-sm\">\n              <Separator className=\"bg-border\" />\n              \n              {/* Main page size - Always show */}\n              <div className=\"bg-muted/50 p-3 rounded\">\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-primary\">{pageSizeData.formatted}</div>\n                  <div className=\"text-xs text-muted-foreground\">Total Page Size</div>\n                </div>\n              </div>\n\n              {/* Detailed breakdown - Show based on settings */}\n              {settings.showDetailedView && (\n                <>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <div className=\"text-center p-2 bg-card border border-border rounded\">\n                      <div className=\"font-medium text-card-foreground\">{Math.round(pageSizeData.htmlBytes / 1024)} KB</div>\n                      <div className=\"text-xs text-muted-foreground\">HTML Size</div>\n                    </div>\n                    <div className=\"text-center p-2 bg-card border border-border rounded\">\n                      <div className=\"font-medium text-card-foreground\">{Math.round(pageSizeData.textBytes / 1024)} KB</div>\n                      <div className=\"text-xs text-muted-foreground\">Text Content</div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <div className=\"text-center p-2 bg-card border border-border rounded\">\n                      <div className=\"font-medium text-card-foreground\">{pageSizeData.images}</div>\n                      <div className=\"text-xs text-muted-foreground\">Images</div>\n                    </div>\n                    <div className=\"text-center p-2 bg-card border border-border rounded\">\n                      <div className=\"font-medium text-card-foreground\">{pageSizeData.links}</div>\n                      <div className=\"text-xs text-muted-foreground\">Links</div>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          )}\n\n          {/* Auto-analyze status */}\n          {settings.autoAnalyze && canAnalyze && (\n            <div className=\"text-center text-xs text-muted-foreground\">\n              Auto-analyze is enabled\n            </div>\n          )}\n\n          {/* Unsupported page message */}\n          {!canAnalyze && (\n            <div className=\"text-center text-sm text-muted-foreground py-2\">\n              <AlertTriangle className=\"w-4 h-4 mx-auto mb-1\" />\n              Page size analysis not available on this page type\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </TabsContent>\n  );\n}"],"names":["__iconNode","ChartColumn","createLucideIcon","TriangleAlert","ActionResult","result","onDismiss","autoDismiss","autoDismissDelay","React","timer","getAlertConfig","CheckCircle","AlertCircle","Icon","variant","iconColor","jsxs","Alert","jsx","AlertDescription","PageAnalyzerTab","value","currentTab","isLoading","setIsLoading","useState","analyzerResult","setAnalyzerResult","pageSizeData","setPageSizeData","settings","setSettings","canAnalyze","messaging","useEffect","loadSettings","handleAnalyzePage","showDetailedView","storage","autoAnalyze","error","response","TabsContent","Card","CardHeader","CardTitle","FileText","CardContent","Button","Fragment","Loader2","BarChart3","Separator","AlertTriangle"],"mappings":"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","x_google_ignoreList":[0,1]}