import{r,j as e,Q as h,B as j,k as y,l as Q,S as v}from"./index-ppmD041L.js";import{c as C,L as T}from"./tabs-BgEjskF2.js";import{C as b,a as N,c as w,b as q}from"./card-DvemRyrq.js";import{A as G,a as S}from"./alert-CrZN6C-8.js";import{B as x}from"./badge-87lzTouD.js";import{s as A}from"./storage-Dee3qOXW.js";import{R as B}from"./refresh-cw-BGgXHHG2.js";import{C as E,a as F}from"./circle-check-big-BsxXJ8aq.js";function L({result:t,onDismiss:i,autoHide:o=!0,hideDelay:n=2e3}){if(r.useEffect(()=>{if(t&&o&&i){const a=setTimeout(i,n);return()=>clearTimeout(a)}},[t,i,o,n]),!t)return null;const c=t.type==="success"?E:F;return e.jsxs(G,{variant:t.type==="success"?"default":"destructive",children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx(S,{children:t.message})]})}function P({quote:t}){return e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded border",children:[e.jsxs("div",{className:"text-sm italic mb-3 leading-relaxed",children:['"',t.text,'"']}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["— ",t.author]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",children:t.category}),e.jsx(x,{variant:t.source==="api"?"default":"secondary",children:t.source==="api"?"Live":"Offline"})]})]})]})]})}function J({value:t,currentTab:i}){const[o,n]=r.useState(!1),[c,a]=r.useState(null),[d,p]=r.useState(null),[l,m]=r.useState("general");r.useEffect(()=>{f()},[]);const f=async()=>{try{const s=await A.get("quoteGenerator.type","general");m(s)}catch(s){console.warn("[Quote PopupTab] Failed to load quote type:",s),m("general")}},g=async()=>{console.log("[Quote PopupTab] 🚀 Getting quote, type:",l),n(!0),a(null);try{const s=l==="motivational"?await y():await Q();console.log("[Quote PopupTab] ✅ Quote received:",s),p(s),a({type:"success",message:s.source==="api"?"Fresh quote fetched!":"Offline quote loaded"})}catch(s){console.error("[Quote PopupTab] ❌ Error:",s),a({type:"error",message:"Failed to get quote. Please try again."})}finally{n(!1)}},u={general:{title:"General Quote",desc:"Wisdom and life advice",buttonText:"Get Wisdom Quote"},motivational:{title:"Motivational Quote",desc:"Inspiring messages for motivation",buttonText:"Get Motivational Quote"}}[l];return e.jsx(C,{value:t,children:e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsxs(w,{className:"text-base flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),u.title]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.desc})]}),e.jsxs(q,{className:"space-y-4",children:[e.jsx(j,{onClick:g,disabled:o,className:"w-full",children:o?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4 mr-2 animate-spin"}),"Getting Quote..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),u.buttonText]})}),e.jsx(L,{result:c,onDismiss:()=>a(null),autoHide:!0,hideDelay:3e3}),d&&e.jsx(P,{quote:d}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Change quote type in extension settings"})})]})]})})}export{J as default};
//# sourceMappingURL=PopupTab-D6p9jc9E.js.map
