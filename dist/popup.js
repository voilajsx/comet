import{c as V,j as e,a as S,B as k,X as W,S as U,r as w,u as G,E as H,b as X,d as q,T as J,e as K}from"./index-ppmD041L.js";import{s as x}from"./storage-Dee3qOXW.js";import{T as Q,a as Y,b as _,c as ee,L as ne}from"./tabs-BgEjskF2.js";import{T as se}from"./triangle-alert-CkKMkR-p.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=V("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function $({variant:t="default",size:c="md",title:a,subtitle:l,logo:i,badge:o,headerActions:p,showBack:m=!1,showClose:h=!1,showDivider:O=!0,onBack:C,onClose:v,footer:b,scrollable:j=!0,className:d,children:E,...L}){const y={sm:"w-72 max-h-80",md:"w-80 max-h-96",lg:"w-96 max-h-[32rem]",auto:"min-w-72 max-w-lg max-h-[80vh]"},r={default:"bg-background border-border shadow-lg",compact:"bg-card border-border shadow-md",mini:"bg-popover border-border shadow-sm"},g={default:"p-4",compact:"p-3",mini:"p-2"},u=a||l||i||o||p||m||h;return e.jsxs("div",{className:S("flex flex-col border rounded-lg overflow-hidden",y[c],r[t],d),...L,children:[u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:S("flex items-center gap-3",g[t]),children:[m&&e.jsx(k,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:C,children:e.jsx(te,{className:"h-4 w-4"})}),i&&e.jsx("div",{className:"shrink-0",children:i}),e.jsxs("div",{className:"flex-1 min-w-0",children:[a&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-sm font-semibold text-foreground truncate",children:a}),o&&o]}),l&&e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:l})]}),p&&e.jsx("div",{className:"shrink-0 flex items-center gap-1",children:p}),h&&e.jsx(k,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:v,children:e.jsx(W,{className:"h-4 w-4"})})]}),O&&e.jsx(U,{})]}),e.jsx("div",{className:S("flex-1",j&&"overflow-y-auto overflow-x-hidden",!u&&g[t],u&&t==="default"&&"p-4",u&&t==="compact"&&"p-3",u&&t==="mini"&&"p-2"),children:E}),b&&e.jsxs(e.Fragment,{children:[e.jsx(U,{}),e.jsx("div",{className:g[t],children:b})]})]})}function oe({tabs:t,defaultTab:c,onTabChange:a,className:l=""}){const i=c||t[0]?.id;return e.jsx("div",{className:`w-full ${l}`,children:e.jsxs(Q,{defaultValue:i,onValueChange:a,className:"w-full",children:[e.jsx(Y,{className:`grid w-full grid-cols-${t.length} mb-4`,children:t.map(o=>{const p=o.icon;return e.jsxs(_,{value:o.id,disabled:o.disabled,className:"flex items-center gap-2",children:[p&&e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{children:o.label})]},o.id)})}),t.map(o=>e.jsx(ee,{value:o.id,className:"mt-0 focus:outline-none",children:o.content},o.id))]})})}function n(t,c,a=null){const i=`[Popup Debug ${new Date().toISOString().split("T")[1].slice(0,-1)}]`;a?console[t](`${i} ${c}`,a):console[t](`${i} ${c}`)}function ae({extensionName:t,extensionIcon:c,size:a="lg",variant:l="default",className:i="",customLogo:o,customActions:p,footerContent:m,onSettingsClick:h,onExtensionToggle:O}){n("info","🚀 PopupWrapper initializing");const[C,v]=w.useState(""),[b,j]=w.useState(!0),[d,E]=w.useState({appName:"Comet Extension",appIcon:"Zap",popupOverrideLogoText:""}),[L,y]=w.useState(null),{popupTabs:r,loading:g,currentTab:u,extensionEnabled:F}=G();n("info","📊 Module discovery state:",{popupTabsCount:r.length,loading:g,currentTab:u?.url,extensionEnabled:F}),w.useEffect(()=>{n("info","🔄 Starting popup initialization"),B()},[r]);const B=async()=>{try{n("info","📚 Loading extension state and configuration"),n("info","🔍 Loading extension enabled state");const s=await x.get("extensionEnabled",!0);j(s),n("info",`✅ Extension enabled: ${s}`),n("info","🔍 Loading app configuration");const f=await x.get("app-name","Comet Extension"),I=await x.get("app-icon","Zap"),A=await x.get("popup-logoOverrideText","Comet One");if(n("info","✅ App configuration loaded:",{appName:f,appIcon:I,popupOverrideLogoText:A}),E({appName:f,appIcon:I,popupOverrideLogoText:A}),r.length>0){n("info",`📑 Setting up tabs (${r.length} available)`),n("info","Available tabs:",r.map(P=>({id:P.id,label:P.label})));const z=await x.get("popup.activeTab",r[0].id),R=r.find(P=>P.id===z)?z:r[0].id;v(R),n("info",`✅ Active tab set to: ${R}`)}else n("warn","⚠️ No popup tabs available");n("info","✅ Popup initialization complete")}catch(s){n("error","❌ Popup initialization failed:",s),y(s.message),E({appName:"Comet Extension",appIcon:"Zap",popupOverrideLogoText:"Comet One"}),j(!0),v("")}},D=async s=>{n("info",`🔄 Toggling extension enabled state to: ${s}`),j(s);try{await x.set("extensionEnabled",s),n("info",`✅ Extension enabled state saved: ${s}`),O?.(s)}catch(f){n("error","❌ Failed to save extension enabled state:",f)}},Z=s=>{n("info",`🔄 Changing active tab to: ${s}`),v(s);try{x.set("popup.activeTab",s),n("info",`✅ Active tab saved: ${s}`)}catch(f){n("error","❌ Failed to save active tab:",f)}},M=()=>{n("info","⚙️ Settings button clicked"),h?h():typeof chrome<"u"&&chrome.runtime&&chrome.runtime.openOptionsPage?(n("info","🌐 Opening options page via Chrome API"),chrome.runtime.openOptionsPage()):typeof browser<"u"&&browser.runtime&&browser.runtime.openOptionsPage?(n("info","🌐 Opening options page via Browser API"),browser.runtime.openOptionsPage()):n("warn","⚠️ Options page API not available")},N=o||(()=>{n("info","🎨 Generating logo component");let s={size:"md"};return t?(s.overrideName=t,n("info",`📝 Using extensionName prop: ${t}`)):typeof d.popupOverrideLogoText=="string"&&d.popupOverrideLogoText.length>0?(s.overrideName=d.popupOverrideLogoText,n("info",`📝 Using popup override text: ${d.popupOverrideLogoText}`)):(s.name=d.appName,n("info",`📝 Using app name: ${d.appName}`)),c?(s.icon=c,n("info",`🎨 Using extensionIcon prop: ${c}`)):s.overrideName?(s.icon=void 0,n("info","🎨 No icon (override name mode)")):(s.icon=d.appIcon,n("info",`🎨 Using app icon: ${d.appIcon}`)),n("info","✅ Logo component props:",s),e.jsx(H,{...s})})(),T=p||e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:M,className:"h-6 w-6 p-0 text-muted-foreground  ",children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx(q,{checked:b,onCheckedChange:D})]});return g?(n("info","⏳ Rendering loading state"),e.jsx($,{size:a,variant:l,className:`border-0 ${i}`,logo:N,headerActions:T,footer:m,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(ne,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),e.jsx("div",{className:"text-sm",children:"Loading..."})]})})):L?(n("error","❌ Rendering error state"),e.jsx($,{size:a,variant:l,className:`border-0 ${i}`,logo:N,headerActions:T,footer:m,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(se,{className:"h-6 w-6 mx-auto mb-2 text-destructive"}),e.jsx("div",{className:"text-sm",children:"Initialization Error"}),e.jsx("div",{className:"text-xs mt-1 text-destructive",children:L})]})})):b?r.length===0?(n("warn","⚠️ Rendering no features state"),e.jsx($,{size:a,variant:l,className:`border-0 ${i}`,logo:N,headerActions:T,footer:m,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("div",{className:"text-sm",children:"No features available"}),e.jsx("div",{className:"text-xs mt-1",children:"Check settings or current page"})]})})):(n("info","✅ Rendering main popup interface"),n("info",`📑 Active tab: ${C}`),n("info",`📊 Total tabs: ${r.length}`),e.jsx($,{variant:l,size:a,className:`border-0 rounded-none ${i}`,logo:N,headerActions:T,footer:m,scrollable:!0,children:e.jsx(oe,{tabs:r,defaultTab:C,onTabChange:Z})})):(n("info","🚫 Rendering disabled state"),e.jsx($,{size:a,variant:l,className:`border-0 ${i}`,logo:N,headerActions:T,footer:m,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("div",{className:"text-sm",children:"Extension is disabled"}),e.jsx("div",{className:"text-xs mt-1",children:"Toggle above to enable"})]})}))}function ie(){return e.jsx(ae,{})}function re(){return e.jsx(J,{theme:"metro",variant:"light",detectSystem:!1,children:e.jsx(ie,{})})}const le=K.createRoot(document.getElementById("root"));le.render(e.jsx(re,{}));
//# sourceMappingURL=popup.js.map
