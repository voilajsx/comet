import{c as A,j as e,a as L,B as y,X as B,S,r as w,u as R,E as V,b as D,d as H,T as M,e as X}from"./index-D2A6gC7_.js";import{s as m}from"./storage-BLOHu4CK.js";import{T as q,a as G,b as J,c as K}from"./tabs-CXYrrsGC.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=A("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function T({variant:a="default",size:x="md",title:o,subtitle:n,logo:r,badge:t,headerActions:c,showBack:l=!1,showClose:u=!1,showDivider:C=!0,onBack:E,onClose:h,footer:g,scrollable:f=!0,className:d,children:v,...i}){const P={sm:"w-72 max-h-80",md:"w-80 max-h-96",lg:"w-96 max-h-[32rem]",auto:"min-w-72 max-w-lg max-h-[80vh]"},O={default:"bg-background border-border shadow-lg",compact:"bg-card border-border shadow-md",mini:"bg-popover border-border shadow-sm"},j={default:"p-4",compact:"p-3",mini:"p-2"},p=o||n||r||t||c||l||u;return e.jsxs("div",{className:L("flex flex-col border rounded-lg overflow-hidden",P[x],O[a],d),...i,children:[p&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:L("flex items-center gap-3",j[a]),children:[l&&e.jsx(y,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:E,children:e.jsx(Q,{className:"h-4 w-4"})}),r&&e.jsx("div",{className:"shrink-0",children:r}),e.jsxs("div",{className:"flex-1 min-w-0",children:[o&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-sm font-semibold text-foreground truncate",children:o}),t&&t]}),n&&e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:n})]}),c&&e.jsx("div",{className:"shrink-0 flex items-center gap-1",children:c}),u&&e.jsx(y,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:h,children:e.jsx(B,{className:"h-4 w-4"})})]}),C&&e.jsx(S,{})]}),e.jsx("div",{className:L("flex-1",f&&"overflow-y-auto overflow-x-hidden",!p&&j[a],p&&a==="default"&&"p-4",p&&a==="compact"&&"p-3",p&&a==="mini"&&"p-2"),children:v}),g&&e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx("div",{className:j[a],children:g})]})]})}function U({tabs:a,defaultTab:x,onTabChange:o,className:n=""}){const r=x||a[0]?.id;return e.jsx("div",{className:`w-full ${n}`,children:e.jsxs(q,{defaultValue:r,onValueChange:o,className:"w-full",children:[e.jsx(G,{className:`grid w-full grid-cols-${a.length} mb-4`,children:a.map(t=>{const c=t.icon;return e.jsxs(J,{value:t.id,disabled:t.disabled,className:"flex items-center gap-2",children:[c&&e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:t.label})]},t.id)})}),a.map(t=>e.jsx(K,{value:t.id,className:"mt-0 focus:outline-none",children:t.content},t.id))]})})}function Y({extensionName:a,extensionIcon:x,size:o="lg",variant:n="default",className:r="",customLogo:t,customActions:c,footerContent:l,onSettingsClick:u,onExtensionToggle:C}){const[E,h]=w.useState(""),[g,f]=w.useState(!0),[d,v]=w.useState({appName:"Comet Extension",appIcon:"Zap",popupOverrideLogoText:""}),{popupTabs:i,loading:P}=R();w.useEffect(()=>{O()},[i]);const O=async()=>{try{const s=await m.get("extensionEnabled",!0);f(s);const $=await m.get("app.name","Comet Extension"),z=await m.get("app.icon","Zap"),F=await m.get("popup.logoOverrideText","Comet One");if(v({appName:$,appIcon:z,popupOverrideLogoText:F}),i.length>0){const k=await m.get("popup.activeTab",i[0].id),W=i.find(Z=>Z.id===k);h(W?k:i[0].id)}}catch(s){console.error("[PopupWrapper] Failed to initialize:",s),v({appName:"Comet Extension",appIcon:"Zap",popupOverrideLogoText:"Comet One"}),f(!0),h("")}},j=async s=>{f(s),await m.set("extensionEnabled",s),C?.(s)},p=s=>{h(s),m.set("popup.activeTab",s)},I=()=>{u?u():typeof chrome<"u"&&chrome.runtime&&chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():typeof browser<"u"&&browser.runtime&&browser.runtime.openOptionsPage?browser.runtime.openOptionsPage():console.warn("[PopupWrapper] Options page API not available")},N=t||(()=>{let s={size:"md"};return a?s.overrideName=a:typeof d.popupOverrideLogoText=="string"&&d.popupOverrideLogoText.length>0?s.overrideName=d.popupOverrideLogoText:s.name=d.appName,x?s.icon=x:s.overrideName?s.icon=void 0:s.icon=d.appIcon,e.jsx(V,{...s})})(),b=c||e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"ghost",size:"sm",onClick:I,className:"h-6 w-6 p-0",children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx(H,{checked:g,onCheckedChange:j})]});return P?e.jsx(T,{size:o,variant:n,className:`border-0 ${r}`,logo:N,headerActions:b,footer:l,children:e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:e.jsx("div",{className:"text-sm",children:"Loading..."})})}):g?i.length===0?e.jsx(T,{size:o,variant:n,className:`border-0 ${r}`,logo:N,headerActions:b,footer:l,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("div",{className:"text-sm",children:"No features available"}),e.jsx("div",{className:"text-xs mt-1",children:"Check settings or current page"})]})}):e.jsx(T,{variant:n,size:o,className:`border-0 ${r}`,logo:N,headerActions:b,footer:l,scrollable:!0,children:e.jsx(U,{tabs:i,defaultTab:E,onTabChange:p})}):e.jsx(T,{size:o,variant:n,className:`border-0 ${r}`,logo:N,headerActions:b,footer:l,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("div",{className:"text-sm",children:"Extension is disabled"}),e.jsx("div",{className:"text-xs mt-1",children:"Toggle above to enable"})]})})}function _(){return e.jsx(Y,{})}function ee(){return e.jsx(M,{theme:"metro",variant:"light",detectSystem:!1,children:e.jsx(_,{})})}const se=X.createRoot(document.getElementById("root"));se.render(e.jsx(ee,{}));
//# sourceMappingURL=popup.js.map
