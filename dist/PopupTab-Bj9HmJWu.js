import{f as p,r as d,m as g,j as e,F as N,B as v,S as z,R as A}from"./index-CZNxiXtd.js";import{c as C}from"./tabs-B3iuBGx8.js";import{C as w,a as S,c as P,b as k}from"./card-2ji1PRM0.js";import{L as T,A as M,a as B}from"./alert-QAi-ayg-.js";import{s as h}from"./storage-DwfbqBlG.js";import{a as f,C as L}from"./circle-check-big-B9-4b270.js";/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],F=p("chart-column",D);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],V=p("triangle-alert",R);function E({result:r,onDismiss:l,autoDismiss:c=!0,autoDismissDelay:i=3e3}){if(A.useEffect(()=>{if(r&&c&&l){const o=setTimeout(l,i);return()=>clearTimeout(o)}},[r,c,i,l]),!r)return null;const m=()=>{switch(r.type){case"success":return{icon:L,variant:"default",iconColor:"text-green-500"};case"error":return{icon:f,variant:"destructive",iconColor:"text-destructive"};default:return{icon:f,variant:"default",iconColor:"text-muted-foreground"}}},{icon:s,variant:a,iconColor:u}=m();return e.jsxs(M,{variant:a,className:"border-border",children:[e.jsx(s,{className:`h-4 w-4 ${u}`}),e.jsx(B,{className:"text-sm pt-1",children:r.message})]})}function G({value:r,currentTab:l}){const[c,i]=d.useState(!1),[m,s]=d.useState(null),[a,u]=d.useState(null),[o,y]=d.useState({showDetailedView:!0,autoAnalyze:!1}),n=g.isTabSupported(l);d.useEffect(()=>{j()},[]),d.useEffect(()=>{o.autoAnalyze&&n&&!a&&x()},[o.autoAnalyze,n]);const j=async()=>{try{const t=await h.get("pageAnalyzer.showDetailedView",!0),b=await h.get("pageAnalyzer.autoAnalyze",!1);y({showDetailedView:t,autoAnalyze:b})}catch(t){console.error("[Page Analyzer Popup] Failed to load settings:",t)}},x=async()=>{if(!n){s({type:"error",message:"Page analysis not available on this page type"});return}i(!0),s(null);try{const t=await g.sendToContent({type:"getPageSize",data:{}});t?.success?(u(t.data),s({type:"success",message:"Page analyzed successfully!"})):s({type:"error",message:t?.error||"Analysis failed"})}catch{s({type:"error",message:"Could not analyze page size"})}finally{i(!1)}};return e.jsx(C,{value:r,className:"mt-0",children:e.jsxs(w,{className:"bg-card border-border",children:[e.jsx(S,{className:"pb-3",children:e.jsxs(P,{className:"text-base text-card-foreground flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Page Size Analysis"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsx(v,{onClick:x,disabled:c,className:"w-full",variant:n?"default":"secondary",children:c?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing Page Size..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),n?"Analyze Page Size":"Analysis Not Available"]})}),e.jsx(E,{result:m,onDismiss:()=>s(null),autoDismiss:!0,autoDismissDelay:3e3}),a&&e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx(z,{className:"bg-border"}),e.jsx("div",{className:"bg-muted/50 p-3 rounded",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:a.formatted}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Page Size"})]})}),o.showDetailedView&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-2 bg-card border border-border rounded",children:[e.jsxs("div",{className:"font-medium text-card-foreground",children:[Math.round(a.htmlBytes/1024)," KB"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"HTML Size"})]}),e.jsxs("div",{className:"text-center p-2 bg-card border border-border rounded",children:[e.jsxs("div",{className:"font-medium text-card-foreground",children:[Math.round(a.textBytes/1024)," KB"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Text Content"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-2 bg-card border border-border rounded",children:[e.jsx("div",{className:"font-medium text-card-foreground",children:a.images}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Images"})]}),e.jsxs("div",{className:"text-center p-2 bg-card border border-border rounded",children:[e.jsx("div",{className:"font-medium text-card-foreground",children:a.links}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Links"})]})]})]})]}),o.autoAnalyze&&n&&e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"Auto-analyze is enabled"}),!n&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground py-2",children:[e.jsx(V,{className:"w-4 h-4 mx-auto mb-1"}),"Page size analysis not available on this page type"]})]})]})})}export{G as default};
//# sourceMappingURL=PopupTab-Bj9HmJWu.js.map
