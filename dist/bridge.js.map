{"version":3,"file":"bridge.js","sources":["../src/scripts/modules/pageAnalyzer.js","../src/platform/api.js","../src/scripts/modules/quoteGenerator.js","../src/platform/storage.js","../src/scripts/modules/userAuth.js","../src/scripts/bridge.js"],"sourcesContent":["/**\n * Comet Framework - Page Analyzer Module\n * Simple page size and word count analysis\n * @module @voilajsx/comet\n * @file src/scripts/modules/pageAnalyzer.js\n */\n\n/**\n * Get basic page data\n * @returns {object} Simple page metrics\n */\nfunction getPageData() {\n  const text = document.body.innerText || '';\n  const words = text\n    .trim()\n    .split(/\\s+/)\n    .filter((word) => word.length > 0);\n\n  return {\n    wordCount: words.length,\n    pageSize: getPageSize(),\n    title: document.title,\n    url: window.location.href,\n  };\n}\n\n/**\n * Get page size information\n * @returns {object} Page size data\n */\nfunction getPageSize() {\n  const html = document.documentElement.outerHTML;\n  const text = document.body.innerText || '';\n\n  return {\n    htmlBytes: new Blob([html]).size,\n    textBytes: new Blob([text]).size,\n    formatted: formatBytes(new Blob([html]).size),\n  };\n}\n\n/**\n * Format bytes to readable string\n */\nfunction formatBytes(bytes) {\n  if (bytes === 0) return '0 Bytes';\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n}\n\n/**\n * Page Analyzer Module Configuration\n */\nconst pageAnalyzerModule = {\n  name: 'pageAnalyzer',\n\n  // Message handlers this module provides\n  handlers: {\n    getPageData: () => getPageData(),\n    getPageSize: () => getPageSize(),\n  },\n\n  // Main action for combined operations\n  mainAction: () => getPageData(),\n\n  // Module initialization (optional)\n  init: () => {\n    console.log('[Page Analyzer] Module initialized');\n  },\n};\n\n// âœ… Export module (instead of registerModule call)\nexport default pageAnalyzerModule;\n","/**\n * Comet Framework - Universal API utilities\n * Clean API proxy that works from any extension context\n * @module @voilajsx/comet\n * @file src/platform/api.js\n */\n\n/**\n * Universal API utilities that work from any extension context\n * Routes through background script to avoid CORS issues\n */\nexport const comet = {\n  // Base fetch method\n  async fetch(url, options = {}) {\n    try {\n      const response = await new Promise((resolve, reject) => {\n        chrome.runtime.sendMessage(\n          {\n            type: 'api.fetch',\n            data: {\n              url,\n              method: options.method || 'GET',\n              headers: options.headers || {}, // Make sure this is passed\n              body: options.body || null,\n              timeout: options.timeout || 30000,\n            },\n          },\n          (response) => {\n            if (chrome.runtime.lastError) {\n              reject(new Error(chrome.runtime.lastError.message));\n            } else {\n              resolve(response);\n            }\n          }\n        );\n      });\n\n      return {\n        ok: response.success,\n        status: response.status,\n        json: () => Promise.resolve(response.data),\n        data: response.data,\n        error: response.error,\n      };\n    } catch (error) {\n      return {\n        ok: false,\n        status: 0,\n        error: error.message,\n        json: () => Promise.reject(error),\n      };\n    }\n  },\n\n  // REST convenience methods\n  async get(url, headers = {}) {\n    return this.fetch(url, { method: 'GET', headers });\n  },\n\n  async post(url, data = null, headers = {}) {\n    return this.fetch(url, {\n      method: 'POST',\n      body: data,\n      headers, // Headers should be passed here\n    });\n  },\n\n  async put(url, data = null, headers = {}) {\n    return this.fetch(url, {\n      method: 'PUT',\n      body: data,\n      headers,\n    });\n  },\n\n  async patch(url, data = null, headers = {}) {\n    return this.fetch(url, {\n      method: 'PATCH',\n      body: data,\n      headers,\n    });\n  },\n\n  async delete(url, headers = {}) {\n    return this.fetch(url, { method: 'DELETE', headers });\n  },\n};\n","/**\n * Comet Framework - Quote Generator Module (Simplified)\n * Fetches inspirational quotes using Comet API utilities\n * @module @voilajsx/comet\n * @file src/scripts/modules/quoteGenerator.js\n */\n\nimport { comet } from '@voilajsx/comet/api';\n\n/**\n * Quote Generator Module Configuration\n */\nconst quoteGeneratorModule = {\n  name: 'quoteGenerator',\n\n  handlers: {\n    getQuote: () => getRandomQuote(),\n    getMotivationalQuote: () => getMotivationalQuote(),\n  },\n\n  mainAction: () => getRandomQuote(),\n\n  init: () => {\n    console.log('[Quote Generator] Module initialized');\n  },\n};\n\n/**\n * Get a random quote with backup API\n */\nasync function getRandomQuote() {\n  const apis = [\n    {\n      url: 'https://api.adviceslip.com/advice',\n      transform: (response) => ({\n        text: response.data.data.slip.advice, // response.data.data.slip.advice\n        author: 'Anonymous',\n        tags: ['advice'],\n      }),\n    },\n    {\n      url: 'https://api.kanye.rest/',\n      transform: (response) => ({\n        text: response.data.data.quote, // response.data.data.quote\n        author: 'Kanye West',\n        tags: ['inspiration'],\n      }),\n    },\n  ];\n\n  for (const api of apis) {\n    try {\n      console.log(`[Quote Generator] Trying ${api.url}`);\n      const response = await comet.get(api.url);\n\n      console.log(\n        `[Quote Generator] Full response:`,\n        JSON.stringify(response, null, 2)\n      );\n\n      if (response.ok && response.data && response.data.data) {\n        const quote = api.transform(response);\n\n        console.log(`[Quote Generator] Transformed quote:`, quote);\n\n        return {\n          success: true,\n          quote: {\n            text: quote.text,\n            author: quote.author,\n            length: quote.text.length,\n            tags: quote.tags,\n          },\n          timestamp: Date.now(),\n        };\n      }\n    } catch (error) {\n      console.warn(`[Quote Generator] API failed:`, error);\n      continue;\n    }\n  }\n\n  return {\n    success: false,\n    error: 'APIs unavailable',\n    fallbackQuote: getFallbackQuote(),\n  };\n}\n\n/**\n * Get motivational quote\n */\nasync function getMotivationalQuote() {\n  const result = await getRandomQuote();\n\n  if (result.success) {\n    result.quote.category = 'motivational';\n    return result;\n  }\n\n  return {\n    success: false,\n    error: result.error,\n    fallbackQuote: getMotivationalFallback(),\n  };\n}\n\n/**\n * Fallback quotes\n */\nfunction getFallbackQuote() {\n  const quotes = [\n    {\n      text: 'The only way to do great work is to love what you do.',\n      author: 'Steve Jobs',\n    },\n    {\n      text: \"Life is what happens while you're busy making other plans.\",\n      author: 'John Lennon',\n    },\n    {\n      text: 'The future belongs to those who believe in their dreams.',\n      author: 'Eleanor Roosevelt',\n    },\n  ];\n\n  const quote = quotes[Math.floor(Math.random() * quotes.length)];\n  return { ...quote, source: 'fallback', tags: ['wisdom'] };\n}\n\nfunction getMotivationalFallback() {\n  const quotes = [\n    {\n      text: 'Success is courage to continue despite failures.',\n      author: 'Winston Churchill',\n    },\n    {\n      text: 'The only impossible journey is the one you never begin.',\n      author: 'Tony Robbins',\n    },\n    {\n      text: \"Don't watch the clock; keep going like it does.\",\n      author: 'Sam Levenson',\n    },\n  ];\n\n  const quote = quotes[Math.floor(Math.random() * quotes.length)];\n  return {\n    ...quote,\n    category: 'motivational',\n    source: 'fallback',\n    tags: ['motivation'],\n  };\n}\n\nexport default quoteGeneratorModule;\n","/**\n * Comet Extension Storage Utility (Cross-Browser)\n * Enhanced storage with auto-loading defaults from defaults.json\n * Works with Chrome, Firefox, Edge, Opera, Brave, and other WebExtension browsers\n * @module @voilajsx/comet\n * @file src/platform/storage.js\n */\n\n// Cross-browser API detection\nconst browserAPI = (() => {\n  if (typeof browser !== 'undefined') {\n    return browser; // Firefox, newer browsers\n  } else if (typeof chrome !== 'undefined') {\n    return chrome; // Chrome, Edge, Opera, Brave\n  } else {\n    throw new Error('No browser extension API available');\n  }\n})();\n\n/**\n * Enhanced Comet Storage Manager\n * Auto-loads defaults and provides unified API for all data access\n */\nclass CometStorageManager {\n  constructor() {\n    this.api = browserAPI;\n    this.syncQuota = this.api.storage.sync.QUOTA_BYTES || 102400; // 100KB\n    this.localQuota = this.api.storage.local.QUOTA_BYTES || 10485760; // 10MB\n    this.syncItemQuota = this.api.storage.sync.QUOTA_BYTES_PER_ITEM || 8192; // 8KB per item\n\n    // Defaults management\n    this.defaults = {};\n    this.defaultsLoaded = false;\n    this.isInitialized = false;\n\n    this.initialize();\n  }\n\n  /**\n   * Initialize storage with auto-loading defaults\n   */\n  async initialize() {\n    if (this.isInitialized) return;\n\n    try {\n      await this.loadDefaults();\n      await this.initializeDefaults();\n      this.isInitialized = true;\n      console.log('[Comet Storage] Initialized with defaults');\n    } catch (error) {\n      console.warn(\n        '[Comet Storage] Initialization failed, continuing without defaults:',\n        error\n      );\n      this.defaults = {};\n      this.defaultsLoaded = true;\n      this.isInitialized = true;\n    }\n  }\n\n  /**\n   * Load defaults from defaults.json\n   */\n  async loadDefaults() {\n    if (this.defaultsLoaded) return;\n\n    try {\n      // Try to import defaults.json\n      const defaultsModule = await import('../defaults.json');\n      this.defaults = defaultsModule.default || {};\n      this.defaultsLoaded = true;\n      console.log('[Comet Storage] Loaded defaults from defaults.json');\n    } catch (error) {\n      console.log(\n        '[Comet Storage] No defaults.json found, using empty defaults'\n      );\n      this.defaults = {};\n      this.defaultsLoaded = true;\n    }\n  }\n\n  /**\n   * Initialize storage with defaults on first run\n   */\n  async initializeDefaults() {\n    try {\n      // Check if we've already initialized defaults\n      const isInitialized = await this.api.storage.local.get(\n        '_defaultsInitialized'\n      );\n\n      if (isInitialized._defaultsInitialized) {\n        return; // Already initialized\n      }\n\n      // Load defaults into storage\n      if (Object.keys(this.defaults).length > 0) {\n        await this.setDefaults(this.defaults);\n        console.log('[Comet Storage] Initialized storage with defaults');\n      }\n\n      // Mark as initialized\n      await this.api.storage.local.set({ _defaultsInitialized: true });\n    } catch (error) {\n      console.warn('[Comet Storage] Failed to initialize defaults:', error);\n    }\n  }\n\n  /**\n   * Recursively set default values\n   */\n  async setDefaults(obj, prefix = '') {\n    for (const [key, value] of Object.entries(obj)) {\n      const fullKey = prefix ? `${prefix}.${key}` : key;\n\n      if (value && typeof value === 'object' && !Array.isArray(value)) {\n        // Recursive for nested objects\n        await this.setDefaults(value, fullKey);\n      } else {\n        // Check if key already exists\n        const existingValue = await this.getRaw(fullKey);\n        if (existingValue === undefined) {\n          // Only set if not already exists\n          await this.setRaw(fullKey, value);\n        }\n      }\n    }\n  }\n\n  /**\n   * Get data from browser storage with auto-fallback to defaults\n   * @param {string|array|object|null} keys - Keys to retrieve\n   * @param {any} fallback - Fallback value if not found\n   * @param {string} [namespace='auto'] - Storage namespace (sync/local/auto)\n   * @returns {Promise<any>} Retrieved data\n   */\n  async get(keys = null, fallback = undefined, namespace = 'auto') {\n    try {\n      await this.initialize();\n\n      // Handle single key string\n      if (typeof keys === 'string') {\n        const value = await this.getRaw(keys, namespace);\n\n        if (value !== undefined) {\n          return value;\n        }\n\n        // Try to get from defaults\n        const defaultValue = this.getDefaultByPath(keys);\n        if (defaultValue !== undefined) {\n          return defaultValue;\n        }\n\n        return fallback;\n      }\n\n      // Handle array of keys\n      if (Array.isArray(keys)) {\n        const result = {};\n        for (const key of keys) {\n          result[key] = await this.get(key, undefined, namespace);\n        }\n        return result;\n      }\n\n      // Handle null (get all)\n      if (keys === null) {\n        const storageArea = this.getStorageArea(namespace, 'read');\n        const result = await storageArea.get(null);\n\n        // Merge with defaults\n        return this.mergeWithDefaults(result);\n      }\n\n      // Handle object (get multiple specific keys)\n      const result = {};\n      for (const key of Object.keys(keys)) {\n        result[key] = await this.get(key, keys[key], namespace);\n      }\n      return result;\n    } catch (error) {\n      console.error('[Comet Storage] Get operation failed:', error);\n      throw new CometStorageError('Failed to read from storage', error);\n    }\n  }\n\n  /**\n   * Set data to browser storage\n   * @param {object|string} data - Data to store (object) or key (string)\n   * @param {any} [value] - Value if first param is key string\n   * @param {string} [namespace='auto'] - Storage namespace (sync/local/auto)\n   * @returns {Promise<boolean>} Success status\n   */\n  async set(data, value = undefined, namespace = 'auto') {\n    try {\n      await this.initialize();\n\n      // Handle set(key, value) syntax\n      if (typeof data === 'string') {\n        return await this.setRaw(data, value, namespace);\n      }\n\n      // Handle object syntax\n      const results = [];\n      for (const [key, val] of Object.entries(data)) {\n        results.push(await this.setRaw(key, val, namespace));\n      }\n\n      return results.every((result) => result === true);\n    } catch (error) {\n      console.error('[Comet Storage] Set operation failed:', error);\n      throw new CometStorageError('Failed to write to storage', error);\n    }\n  }\n\n  /**\n   * Remove data from browser storage\n   * @param {string|array} keys - Keys to remove\n   * @param {string} [namespace='auto'] - Storage namespace (sync/local/auto)\n   * @returns {Promise<boolean>} Success status\n   */\n  async remove(keys, namespace = 'auto') {\n    try {\n      const storageArea = this.getStorageArea(namespace, 'write');\n\n      if (typeof keys === 'string') {\n        await storageArea.remove(keys);\n      } else {\n        await storageArea.remove(keys);\n      }\n\n      return true;\n    } catch (error) {\n      console.error('[Comet Storage] Remove operation failed:', error);\n      throw new CometStorageError('Failed to remove from storage', error);\n    }\n  }\n\n  /**\n   * Clear all data from browser storage\n   * @param {string} [namespace='both'] - Storage namespace (sync/local/both)\n   * @returns {Promise<boolean>} Success status\n   */\n  async clear(namespace = 'both') {\n    try {\n      if (namespace === 'both') {\n        await Promise.all([\n          this.api.storage.sync.clear(),\n          this.api.storage.local.clear(),\n        ]);\n      } else {\n        const storageArea = this.getStorageArea(namespace, 'write');\n        await storageArea.clear();\n      }\n      return true;\n    } catch (error) {\n      console.error('[Comet Storage] Clear operation failed:', error);\n      throw new CometStorageError('Failed to clear storage', error);\n    }\n  }\n\n  /**\n   * Check if data exists in storage (including defaults)\n   * @param {string} key - Key to check\n   * @param {string} [namespace='auto'] - Storage namespace\n   * @returns {Promise<boolean>} True if key exists\n   */\n  async has(key, namespace = 'auto') {\n    try {\n      const value = await this.get(key, undefined, namespace);\n      return value !== undefined;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Get storage usage information\n   * @param {string} [namespace='both'] - Storage namespace (sync/local/both)\n   * @returns {Promise<object>} Usage information\n   */\n  async getUsage(namespace = 'both') {\n    try {\n      const usage = {};\n\n      if (namespace === 'both' || namespace === 'sync') {\n        const syncUsed = await this.api.storage.sync.getBytesInUse();\n        usage.sync = {\n          used: syncUsed,\n          total: this.syncQuota,\n          percentage: Math.round((syncUsed / this.syncQuota) * 100),\n          available: this.syncQuota - syncUsed,\n        };\n      }\n\n      if (namespace === 'both' || namespace === 'local') {\n        const localUsed = await this.api.storage.local.getBytesInUse();\n        usage.local = {\n          used: localUsed,\n          total: this.localQuota,\n          percentage: Math.round((localUsed / this.localQuota) * 100),\n          available: this.localQuota - localUsed,\n        };\n      }\n\n      return usage;\n    } catch (error) {\n      console.error('[Comet Storage] Usage check failed:', error);\n      return { sync: { used: 0, total: 0, percentage: 0, available: 0 } };\n    }\n  }\n\n  /**\n   * Listen to storage changes\n   * @param {function} callback - Callback function (changes, namespace) => void\n   * @returns {function} Unsubscribe function\n   */\n  onChange(callback) {\n    const listener = (changes, namespace) => {\n      callback(changes, namespace);\n    };\n\n    this.api.storage.onChanged.addListener(listener);\n\n    // Return unsubscribe function\n    return () => {\n      this.api.storage.onChanged.removeListener(listener);\n    };\n  }\n\n  /**\n   * Reset storage to defaults\n   * @returns {Promise<boolean>} Success status\n   */\n  async resetToDefaults() {\n    try {\n      await this.clear();\n      await this.api.storage.local.remove('_defaultsInitialized');\n      await this.initializeDefaults();\n      console.log('[Comet Storage] Reset to defaults');\n      return true;\n    } catch (error) {\n      console.error('[Comet Storage] Reset failed:', error);\n      return false;\n    }\n  }\n\n  /**\n   * Get all defaults\n   * @returns {object} Defaults object\n   */\n  getDefaults() {\n    return JSON.parse(JSON.stringify(this.defaults));\n  }\n\n  // ===== INTERNAL HELPER METHODS =====\n\n  /**\n   * Raw get without defaults fallback\n   */\n  async getRaw(key, namespace = 'auto') {\n    const storageArea = this.getStorageArea(namespace, 'read');\n    const result = await storageArea.get(key);\n    return result[key];\n  }\n\n  /**\n   * Raw set without validation\n   */\n  async setRaw(key, value, namespace = 'auto') {\n    const items = { [key]: value };\n    const storageArea = this.getStorageArea(namespace, 'write', items);\n\n    // Validate data size\n    this.validateDataSize(items, storageArea);\n\n    await storageArea.set(items);\n    return true;\n  }\n\n  /**\n   * Get default value by path\n   */\n  getDefaultByPath(path) {\n    return path.split('.').reduce((obj, key) => obj?.[key], this.defaults);\n  }\n\n  /**\n   * Merge storage result with defaults\n   */\n  mergeWithDefaults(storageData) {\n    const result = JSON.parse(JSON.stringify(this.defaults));\n\n    // Overlay storage data on defaults\n    for (const [key, value] of Object.entries(storageData)) {\n      if (key !== '_defaultsInitialized') {\n        this.setByPath(result, key, value);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Set value by path in object\n   */\n  setByPath(obj, path, value) {\n    const keys = path.split('.');\n    const lastKey = keys.pop();\n    const target = keys.reduce((o, key) => {\n      if (!(key in o)) o[key] = {};\n      return o[key];\n    }, obj);\n    target[lastKey] = value;\n  }\n\n  /**\n   * Determine appropriate storage area\n   */\n  getStorageArea(namespace, operation, data = null) {\n    if (namespace === 'sync') return this.api.storage.sync;\n    if (namespace === 'local') return this.api.storage.local;\n\n    // Auto mode: decide based on data size and operation\n    if (namespace === 'auto') {\n      if (operation === 'read') {\n        return this.api.storage.sync;\n      }\n\n      if (data) {\n        const dataSize = this.calculateDataSize(data);\n        return dataSize > this.syncItemQuota\n          ? this.api.storage.local\n          : this.api.storage.sync;\n      }\n    }\n\n    return this.api.storage.sync;\n  }\n\n  /**\n   * Calculate data size in bytes\n   */\n  calculateDataSize(data) {\n    try {\n      return new Blob([JSON.stringify(data)]).size;\n    } catch (error) {\n      return JSON.stringify(data).length;\n    }\n  }\n\n  /**\n   * Validate data size against storage limits\n   */\n  validateDataSize(data, storageArea) {\n    const dataSize = this.calculateDataSize(data);\n    const isSync = storageArea === this.api.storage.sync;\n\n    if (isSync) {\n      for (const [key, value] of Object.entries(data)) {\n        const itemSize = this.calculateDataSize({ [key]: value });\n        if (itemSize > this.syncItemQuota) {\n          throw new CometStorageError(\n            `Item \"${key}\" exceeds sync storage item limit (${itemSize} > ${this.syncItemQuota} bytes)`\n          );\n        }\n      }\n\n      if (dataSize > this.syncQuota) {\n        throw new CometStorageError(\n          `Data exceeds sync storage quota (${dataSize} > ${this.syncQuota} bytes)`\n        );\n      }\n    } else {\n      if (dataSize > this.localQuota) {\n        throw new CometStorageError(\n          `Data exceeds local storage quota (${dataSize} > ${this.localQuota} bytes)`\n        );\n      }\n    }\n  }\n}\n\n/**\n * Comet storage error class\n */\nclass CometStorageError extends Error {\n  constructor(message, originalError) {\n    super(message);\n    this.name = 'CometStorageError';\n    this.originalError = originalError;\n  }\n}\n\n// Create and export storage instance\nexport const storage = new CometStorageManager();\n\n// Export class for advanced usage\nexport { CometStorageManager, CometStorageError };\n","/**\n * Comet Framework - User Authentication Module (Cross-browser with 7-day sessions)\n * Demonstrates login/logout/auth flows with persistent sessions\n * @module @voilajsx/comet\n * @file src/scripts/modules/userAuth.js\n */\n\nimport { comet } from '@voilajsx/comet/api';\nimport { storage } from '@voilajsx/comet/storage';\n\n/**\n * User Auth Module Configuration\n */\nconst userAuthModule = {\n  name: 'userAuth',\n\n  handlers: {\n    login: (data) => loginUser(data),\n    logout: () => logoutUser(),\n    getProfile: () => getUserProfile(),\n    getAuthStatus: (data) => checkAuthStatus(data),\n  },\n\n  mainAction: (data) => checkAuthStatus(data),\n\n  init: () => {\n    console.log('[User Auth] Module initialized with 7-day sessions');\n  },\n};\n\n/**\n * Login user with email and password\n */\n/**\n * Login user with email and password\n */\nasync function loginUser(data) {\n  try {\n    const { email, password } = data || {};\n\n    if (!email || !password) {\n      return {\n        success: false,\n        error: 'Email and password required',\n      };\n    }\n\n    console.log('[User Auth] Attempting login with:', { email });\n\n    const response = await comet.post(\n      'https://reqres.in/api/login',\n      {\n        email: email,\n        password: password,\n      },\n      {\n        'x-api-key': 'reqres-free-v1',\n      }\n    );\n\n    console.log(\n      '[User Auth] Full response:',\n      JSON.stringify(response, null, 2)\n    );\n\n    // Fix: Check the nested data structure\n    // response.data.data.token (not response.data.token)\n    if (\n      response.ok &&\n      response.data &&\n      response.data.data &&\n      response.data.data.token\n    ) {\n      await storeAuthToken(response.data.data.token);\n      return {\n        success: true,\n        message: 'Login successful',\n        user: {\n          email: email,\n          token: response.data.data.token,\n          loginTime: Date.now(),\n        },\n      };\n    } else {\n      const errorMsg =\n        response.data?.data?.error ||\n        response.data?.error ||\n        response.error ||\n        `HTTP ${response.data?.status}`;\n      return {\n        success: false,\n        error: errorMsg,\n      };\n    }\n  } catch (error) {\n    console.error('[User Auth] Login failed:', error);\n    return {\n      success: false,\n      error: 'Login request failed',\n      details: error.message,\n    };\n  }\n}\n\n/**\n * Logout user - clear stored auth data\n */\nasync function logoutUser() {\n  try {\n    await storage.remove([\n      'auth.token',\n      'auth.timestamp',\n      'auth.userData',\n      'auth.userCacheTime',\n      'auth.userEmail',\n    ]);\n\n    console.log('[User Auth] User logged out successfully');\n    return {\n      success: true,\n      message: 'Logged out successfully',\n      timestamp: Date.now(),\n    };\n  } catch (error) {\n    console.error('[User Auth] Logout failed:', error);\n    return {\n      success: false,\n      error: 'Logout failed',\n      details: error.message,\n    };\n  }\n}\n\n/**\n * Get user profile using stored token\n */\nasync function getUserProfile() {\n  try {\n    const token = await getStoredAuthToken();\n\n    if (!token) {\n      return {\n        success: false,\n        error: 'No authentication token found',\n        needsLogin: true,\n      };\n    }\n\n    // Check cached user data first\n    const cachedUserData = await getCachedUserData();\n    if (cachedUserData) {\n      return {\n        success: true,\n        profile: cachedUserData,\n      };\n    }\n\n    const response = await comet.get('https://reqres.in/api/users/2', {\n      Authorization: `Bearer ${token}`,\n      'x-api-key': 'reqres-free-v1',\n    });\n\n    if (response.ok && response.data && response.data.data) {\n      const user = response.data.data;\n      const userData = {\n        id: user.id,\n        email: user.email,\n        firstName: user.first_name,\n        lastName: user.last_name,\n        name: `${user.first_name} ${user.last_name}`,\n        avatar: user.avatar,\n        lastAccess: Date.now(),\n      };\n\n      await cacheUserData(userData);\n      return {\n        success: true,\n        profile: userData,\n      };\n    } else {\n      return {\n        success: false,\n        error: 'Failed to fetch profile',\n        needsLogin: true,\n      };\n    }\n  } catch (error) {\n    console.error('[User Auth] Profile fetch failed:', error);\n    return {\n      success: false,\n      error: 'Profile request failed',\n      details: error.message,\n    };\n  }\n}\n\n/**\n * Check current authentication status with 7-day session\n */\nasync function checkAuthStatus(data = {}) {\n  try {\n    const sessionDays =\n      data.sessionDays || (await storage.get('auth.sessionDays', 7));\n    const token = await getStoredAuthToken(sessionDays);\n\n    if (token) {\n      return {\n        success: true,\n        authenticated: true,\n        hasToken: true,\n        message: 'User is authenticated',\n        sessionDays: sessionDays,\n        timestamp: Date.now(),\n      };\n    } else {\n      return {\n        success: true,\n        authenticated: false,\n        message: 'No valid token found',\n        sessionDays: sessionDays,\n        timestamp: Date.now(),\n      };\n    }\n  } catch (error) {\n    console.error('[User Auth] Auth status check failed:', error);\n    return {\n      success: false,\n      authenticated: false,\n      error: error.message,\n    };\n  }\n}\n\n/**\n * Store authentication token using Comet storage\n */\nasync function storeAuthToken(token) {\n  try {\n    await storage.set({\n      'auth.token': token,\n      'auth.timestamp': Date.now(),\n    });\n    console.log('[User Auth] Token stored successfully');\n  } catch (error) {\n    console.error('[User Auth] Failed to store token:', error);\n  }\n}\n\n/**\n * Get stored authentication token with 7-day expiry\n */\nasync function getStoredAuthToken(sessionDays = 7) {\n  try {\n    const token = await storage.get('auth.token');\n    const timestamp = await storage.get('auth.timestamp');\n\n    if (!token || !timestamp) {\n      return null;\n    }\n\n    const tokenAge = Date.now() - timestamp;\n    const maxAge = sessionDays * 24 * 60 * 60 * 1000;\n\n    if (tokenAge < maxAge) {\n      return token;\n    }\n\n    // Token expired\n    console.log(\n      `[User Auth] Token expired after ${sessionDays} days, removing`\n    );\n    await storage.remove([\n      'auth.token',\n      'auth.timestamp',\n      'auth.userData',\n      'auth.userCacheTime',\n      'auth.userEmail',\n    ]);\n\n    return null;\n  } catch (error) {\n    console.error('[User Auth] Failed to get token:', error);\n    return null;\n  }\n}\n\n/**\n * Cache user data for faster loads\n */\nasync function cacheUserData(userData) {\n  try {\n    await storage.set({\n      'auth.userData': userData,\n      'auth.userCacheTime': Date.now(),\n    });\n  } catch (error) {\n    console.error('[User Auth] Failed to cache user data:', error);\n  }\n}\n\n/**\n * Get cached user data if fresh (1 hour cache)\n */\nasync function getCachedUserData() {\n  try {\n    const userData = await storage.get('auth.userData');\n    const cacheTime = await storage.get('auth.userCacheTime');\n\n    if (!userData || !cacheTime) {\n      return null;\n    }\n\n    const cacheAge = Date.now() - cacheTime;\n    const maxCacheAge = 60 * 60 * 1000; // 1 hour\n\n    if (cacheAge < maxCacheAge) {\n      return userData;\n    }\n\n    return null;\n  } catch (error) {\n    console.error('[User Auth] Failed to get cached user data:', error);\n    return null;\n  }\n}\n\nexport default userAuthModule;\n","/**\n * Comet Framework - Universal Script Bridge (Static Imports)\n * Simple and reliable - no CSP issues, easy to add modules\n * @module @voilajsx/comet\n * @file src/scripts/bridge.js\n */\n\n// ============================================================================\n// ðŸš€ ADD NEW MODULES HERE - Just add import and add to modules array below\n// ============================================================================\nimport pageAnalyzer from './modules/pageAnalyzer.js';\nimport quoteGenerator from './modules/quoteGenerator.js';\nimport userAuth from './modules/userAuth.js';\n// import newModule from './modules/newModule.js';           // <-- Add new imports here\n// import anotherModule from './modules/anotherModule.js';   // <-- Add new imports here\n\n// ============================================================================\n// ðŸš€ ADD NEW MODULES TO THIS ARRAY - Just add module name to array\n// ============================================================================\nconst ALL_MODULES = [\n  pageAnalyzer,\n  quoteGenerator,\n  userAuth,\n  // newModule,        // <-- Add new modules here\n  // anotherModule,    // <-- Add new modules here\n];\n\n// ============================================================================\n// ðŸ”’ FRAMEWORK CODE BELOW - NO NEED TO TOUCH ANYTHING BELOW THIS LINE\n// ============================================================================\n\n/**\n * Universal Comet Script Bridge\n * Registers modules statically - reliable and fast\n */\nclass CometScriptBridge {\n  constructor() {\n    this.isInitialized = false;\n    this.modules = new Map();\n    this.messageHandlers = new Map();\n    this.moduleRegistry = new Map();\n    this.moduleLoadStrategy = 'static-imports';\n\n    this.initialize();\n  }\n\n  async initialize() {\n    if (this.isInitialized) return;\n\n    console.log(\n      '[Comet Bridge] Universal bridge loading on:',\n      window.location.href\n    );\n\n    try {\n      this.setupMessageHandling();\n      this.registerCoreHandlers();\n      this.loadStaticModules();\n      this.notifyReady();\n      this.isInitialized = true;\n\n      console.log(\n        `[Comet Bridge] Initialized with ${this.modules.size} modules:`,\n        Array.from(this.modules.keys())\n      );\n    } catch (error) {\n      console.error('[Comet Bridge] Initialization error:', error);\n      this.isInitialized = true;\n    }\n  }\n\n  setupMessageHandling() {\n    try {\n      chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n        this.handleMessage(message, sender, sendResponse);\n        return true;\n      });\n    } catch (error) {\n      console.warn('[Comet Bridge] Message handling setup failed:', error);\n    }\n  }\n\n  registerCoreHandlers() {\n    this.registerHandler('ping', () => ({\n      success: true,\n      ready: true,\n      url: window.location.href,\n      timestamp: Date.now(),\n      modules: Array.from(this.modules.keys()),\n      moduleCount: this.modules.size,\n      loadStrategy: this.moduleLoadStrategy,\n    }));\n\n    this.registerHandler('getPageInfo', () => ({\n      url: window.location.href,\n      title: document.title,\n      hostname: window.location.hostname,\n      timestamp: Date.now(),\n    }));\n\n    this.registerHandler('getModules', () => ({\n      modules: Array.from(this.modules.keys()),\n      handlers: Array.from(this.messageHandlers.keys()),\n      moduleCount: this.modules.size,\n    }));\n\n    this.registerHandler('performMainAction', (data) =>\n      this.performCombinedAction(data)\n    );\n  }\n\n  loadStaticModules() {\n    console.log('[Comet Bridge] Loading static modules...');\n\n    let loadedCount = 0;\n    for (const moduleData of ALL_MODULES) {\n      try {\n        if (moduleData) {\n          this.registerModule(moduleData);\n          loadedCount++;\n        }\n      } catch (error) {\n        console.warn('[Comet Bridge] Failed to register module:', error);\n      }\n    }\n\n    console.log(\n      `[Comet Bridge] Loaded ${loadedCount}/${ALL_MODULES.length} modules`\n    );\n  }\n\n  registerModule(moduleConfig) {\n    try {\n      if (!this.isValidModule(moduleConfig)) {\n        throw new Error('Invalid module configuration');\n      }\n\n      const name = moduleConfig.name;\n\n      if (this.modules.has(name)) {\n        console.warn(\n          `[Comet Bridge] Module \"${name}\" already registered, skipping`\n        );\n        return;\n      }\n\n      this.modules.set(name, moduleConfig);\n\n      if (moduleConfig.handlers) {\n        Object.entries(moduleConfig.handlers).forEach(\n          ([handlerName, handlerFunc]) => {\n            if (typeof handlerFunc === 'function') {\n              this.registerHandler(handlerName, handlerFunc);\n              this.moduleRegistry.set(handlerName, name);\n            }\n          }\n        );\n      }\n\n      if (typeof moduleConfig.init === 'function') {\n        try {\n          moduleConfig.init();\n        } catch (error) {\n          console.warn(`[Comet Bridge] Module \"${name}\" init failed:`, error);\n        }\n      }\n\n      console.log(`[Comet Bridge] Module \"${name}\" registered successfully`);\n    } catch (error) {\n      console.error('[Comet Bridge] Module registration failed:', error);\n      throw error;\n    }\n  }\n\n  isValidModule(moduleConfig) {\n    return !!(\n      moduleConfig &&\n      typeof moduleConfig === 'object' &&\n      moduleConfig.name &&\n      typeof moduleConfig.name === 'string' &&\n      (moduleConfig.handlers || moduleConfig.mainAction)\n    );\n  }\n\n  registerHandler(type, handler) {\n    if (typeof handler !== 'function') {\n      throw new Error(`Handler for \"${type}\" must be a function`);\n    }\n\n    if (this.messageHandlers.has(type)) {\n      console.warn(\n        `[Comet Bridge] Handler \"${type}\" already exists, overriding`\n      );\n    }\n\n    this.messageHandlers.set(type, handler);\n  }\n\n  async handleMessage(message, sender, sendResponse) {\n    try {\n      const { type, data, id } = message;\n\n      if (!type) {\n        sendResponse({ success: false, error: 'Message type required' });\n        return;\n      }\n\n      console.log(`[Comet Bridge] Message: ${type}`, data);\n\n      const handler = this.messageHandlers.get(type);\n      if (!handler) {\n        sendResponse({\n          success: false,\n          error: `No handler for: ${type}`,\n          availableHandlers: Array.from(this.messageHandlers.keys()),\n          moduleCount: this.modules.size,\n          loadStrategy: this.moduleLoadStrategy,\n        });\n        return;\n      }\n\n      const result = await this.executeHandler(handler, data, sender);\n      const moduleOwner = this.moduleRegistry.get(type);\n\n      sendResponse({\n        success: true,\n        data: result,\n        module: moduleOwner,\n        id,\n      });\n    } catch (error) {\n      console.error('[Comet Bridge] Message handling error:', error);\n      sendResponse({\n        success: false,\n        error: error.message || 'Internal error',\n        id: message.id,\n      });\n    }\n  }\n\n  async executeHandler(handler, data, sender) {\n    try {\n      return await handler(data, sender);\n    } catch (error) {\n      console.error('[Comet Bridge] Handler execution error:', error);\n      throw error;\n    }\n  }\n\n  async performCombinedAction(data) {\n    const results = {};\n    const errors = {};\n\n    for (const [moduleName, moduleConfig] of this.modules) {\n      try {\n        if (\n          moduleConfig.mainAction &&\n          typeof moduleConfig.mainAction === 'function'\n        ) {\n          results[moduleName] = await moduleConfig.mainAction(data);\n        } else if (\n          moduleConfig.analyze &&\n          typeof moduleConfig.analyze === 'function'\n        ) {\n          results[moduleName] = await moduleConfig.analyze(data);\n        }\n      } catch (error) {\n        errors[moduleName] = error.message;\n        console.warn(`[Comet Bridge] Module \"${moduleName}\" failed:`, error);\n      }\n    }\n\n    return {\n      success: Object.keys(errors).length === 0,\n      message: `Combined action completed across ${\n        Object.keys(results).length\n      } modules`,\n      results,\n      errors: Object.keys(errors).length > 0 ? errors : undefined,\n      timestamp: Date.now(),\n      url: window.location.href,\n      loadStrategy: this.moduleLoadStrategy,\n    };\n  }\n\n  notifyReady() {\n    try {\n      chrome.runtime.sendMessage({\n        type: 'contentScriptReady',\n        data: {\n          url: window.location.href,\n          modules: Array.from(this.modules.keys()),\n          moduleCount: this.modules.size,\n          timestamp: Date.now(),\n          loadStrategy: this.moduleLoadStrategy,\n        },\n      });\n    } catch (error) {\n      console.warn('[Comet Bridge] Failed to notify background:', error);\n    }\n  }\n}\n\n// Initialize the universal bridge\nconst scriptBridge = new CometScriptBridge();\n\n// Export for debugging\nif (typeof globalThis !== 'undefined') {\n  globalThis.scriptBridge = scriptBridge;\n}\n"],"names":["getPageData","word","getPageSize","html","text","formatBytes","bytes","k","sizes","i","pageAnalyzerModule","comet","url","options","response","resolve","reject","error","headers","data","quoteGeneratorModule","getRandomQuote","getMotivationalQuote","apis","api","quote","getFallbackQuote","result","getMotivationalFallback","quotes","browserAPI","CometStorageManager","defaultsModule","__vitePreload","defaults$1","obj","prefix","key","value","fullKey","keys","fallback","namespace","defaultValue","CometStorageError","results","val","storageArea","usage","syncUsed","localUsed","callback","listener","changes","items","path","storageData","lastKey","target","o","operation","dataSize","itemSize","message","originalError","storage","userAuthModule","loginUser","logoutUser","getUserProfile","checkAuthStatus","email","password","storeAuthToken","token","getStoredAuthToken","cachedUserData","getCachedUserData","user","userData","cacheUserData","sessionDays","timestamp","tokenAge","maxAge","cacheTime","cacheAge","maxCacheAge","ALL_MODULES","pageAnalyzer","quoteGenerator","userAuth","CometScriptBridge","sender","sendResponse","loadedCount","moduleData","moduleConfig","name","handlerName","handlerFunc","type","handler","id","moduleOwner","errors","moduleName","scriptBridge"],"mappings":"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"}