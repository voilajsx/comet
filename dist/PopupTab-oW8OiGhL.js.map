{"version":3,"file":"PopupTab-oW8OiGhL.js","sources":["../src/features/page-analyzer/components/PopupTab.tsx"],"sourcesContent":["/**\n * Page Analyzer Popup Tab - Simple Demo\n * @module @voilajsx/comet\n * @file src/features/page-analyzer/components/PopupTab.tsx\n */\n\nimport React, { useState } from 'react';\nimport { TabsContent } from '@voilajsx/uikit/tabs';\nimport { Card, CardContent, CardHeader, CardTitle } from '@voilajsx/uikit/card';\nimport { Button } from '@voilajsx/uikit/button';\nimport { Alert, AlertDescription } from '@voilajsx/uikit/alert';\nimport { Separator } from '@voilajsx/uikit/separator';\nimport { Badge } from '@voilajsx/uikit/badge';\nimport { \n  FileText, \n  Shield, \n  Loader2, \n  CheckCircle, \n  AlertCircle,\n  BarChart3,\n  Globe\n} from 'lucide-react';\nimport { messaging } from '@voilajsx/comet/messaging';\nimport { usePageAnalyzer } from '../hooks/usePageAnalyzer';\n\nexport default function PageAnalyzerTab({ value, currentTab }) {\n  const {\n    pageData,\n    validationResult,\n    settings,\n    analyzePageSize,\n    validateHTML,\n    loading\n  } = usePageAnalyzer();\n\n  const [feedback, setFeedback] = useState(null);\n  const canAnalyze = messaging.isTabSupported(currentTab);\n\n  const handleAnalyze = async () => {\n    if (!canAnalyze) {\n      setFeedback({ type: 'error', message: 'Not available on this page' });\n      return;\n    }\n\n    const result = await analyzePageSize();\n    \n    if (result.success) {\n      setFeedback({ type: 'success', message: 'Analysis complete!' });\n      \n      if (settings.autoValidate) {\n        setTimeout(() => handleValidate(), 1000);\n      }\n    } else {\n      setFeedback({ type: 'error', message: result.error });\n    }\n    \n    setTimeout(() => setFeedback(null), 3000);\n  };\n\n  const handleValidate = async () => {\n    if (!canAnalyze) {\n      setFeedback({ type: 'error', message: 'Not available on this page' });\n      return;\n    }\n\n    const result = await validateHTML();\n    \n    if (result.success) {\n      const errors = result.data.errors;\n      setFeedback({ \n        type: errors === 0 ? 'success' : 'warning',\n        message: errors === 0 ? 'Valid HTML!' : `${errors} errors found`\n      });\n    } else {\n      setFeedback({ type: 'error', message: result.error });\n    }\n    \n    setTimeout(() => setFeedback(null), 3000);\n  };\n\n  return (\n    <TabsContent value={value} className=\"mt-0\">\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <CardTitle className=\"text-base flex items-center gap-2\">\n            <FileText className=\"w-4 h-4\" />\n            Page Analysis & Validation\n          </CardTitle>\n        </CardHeader>\n        \n        <CardContent className=\"space-y-4\">\n          \n          {/* Action Buttons */}\n          <div className=\"space-y-2\">\n            <Button\n              onClick={handleAnalyze}\n              disabled={loading.analyze || !canAnalyze}\n              className=\"w-full\"\n            >\n              {loading.analyze ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Analyzing...\n                </>\n              ) : (\n                <>\n                  <BarChart3 className=\"h-4 w-4 mr-2\" />\n                  Analyze Page Size\n                </>\n              )}\n            </Button>\n\n            <Button\n              onClick={handleValidate}\n              disabled={loading.validate || !canAnalyze}\n              variant=\"outline\"\n              className=\"w-full\"\n            >\n              {loading.validate ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Validating...\n                </>\n              ) : (\n                <>\n                  <Shield className=\"h-4 w-4 mr-2\" />\n                  Validate HTML\n                </>\n              )}\n            </Button>\n          </div>\n\n          {/* Feedback */}\n          {feedback && (\n            <Alert variant={feedback.type === 'success' ? 'default' : 'destructive'}>\n              {feedback.type === 'success' ? (\n                <CheckCircle className=\"h-4 w-4\" />\n              ) : (\n                <AlertCircle className=\"h-4 w-4\" />\n              )}\n              <AlertDescription class=\"pt-1\">{feedback.message}</AlertDescription>\n            </Alert>\n          )}\n\n          {/* Results - Simple rows */}\n          {(pageData || validationResult) && (\n            <div className=\"space-y-3\">\n              <Separator />\n              \n              {/* Page Size Result */}\n              {pageData && (\n                <div className=\"flex items-center justify-between p-3 bg-muted/50 rounded\">\n                  <div className=\"flex items-center gap-2\">\n                    <BarChart3 className=\"w-4 h-4 text-blue-600\" />\n                    <span className=\"text-sm\">{pageData.domain}</span>\n                  </div>\n                  <Badge variant=\"secondary\">{pageData.size}</Badge>\n                </div>\n              )}\n\n              {/* Validation Result */}\n              {validationResult && (\n                <div className=\"flex items-center justify-between p-3 bg-muted/50 rounded\">\n                  <div className=\"flex items-center gap-2\">\n                    <Shield className=\"w-4 h-4 text-green-600\" />\n                    <span className=\"text-sm\">{validationResult.domain}</span>\n                  </div>\n                  <Badge variant={validationResult.isValid ? 'default' : 'destructive'}>\n                    {validationResult.isValid ? 'Valid' : `${validationResult.errors} errors`}\n                  </Badge>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Not supported message */}\n          {!canAnalyze && (\n            <div className=\"text-center py-4 text-muted-foreground\">\n              <Globe className=\"w-6 h-6 mx-auto mb-2\" />\n              <div className=\"text-sm\">Not available on this page type</div>\n            </div>\n          )}\n\n        </CardContent>\n      </Card>\n    </TabsContent>\n  );\n}"],"names":["PageAnalyzerTab","value","currentTab","pageData","validationResult","settings","analyzePageSize","validateHTML","loading","usePageAnalyzer","feedback","setFeedback","useState","canAnalyze","messaging","handleAnalyze","result","handleValidate","errors","TabsContent","Card","jsx","CardHeader","jsxs","CardTitle","FileText","CardContent","Button","Fragment","Loader2","BarChart3","Shield","Alert","CheckCircle","AlertCircle","AlertDescription","Separator","Badge","Globe"],"mappings":"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"}