import{c as Qe,j as e,a as I,B as E,X as We,S as O,b as le,r as o,d as He,u as ue,P as L,e as S,f as de,g as me,h as fe,i as Ye,k as ne,l as P,L as re,A as J,m as Je,n as Xe,C as R,o as k,p as X,q as Z,U as xe,F as Q,T as ee,Q as U,s as W,t as Ze,v as oe,E as et,w as tt}from"./ExtensionLogo-yf6z-6ek.js";import{s as T,m as D}from"./messaging-CQ-fz_cX.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Qe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function B({variant:t="default",size:s="md",title:a,subtitle:n,logo:l,badge:u,headerActions:r,showBack:f=!1,showClose:x=!1,showDivider:d=!0,onBack:i,onClose:c,footer:m,scrollable:p=!0,className:b,children:j,...g}){const y={sm:"w-72 max-h-80",md:"w-80 max-h-96",lg:"w-96 max-h-[32rem]",auto:"min-w-72 max-w-lg max-h-[80vh]"},C={default:"bg-background border-border shadow-lg",compact:"bg-card border-border shadow-md",mini:"bg-popover border-border shadow-sm"},v={default:"p-4",compact:"p-3",mini:"p-2"},h=a||n||l||u||r||f||x;return e.jsxs("div",{className:I("flex flex-col border rounded-lg overflow-hidden",y[s],C[t],b),...g,children:[h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:I("flex items-center gap-3",v[t]),children:[f&&e.jsx(E,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:i,children:e.jsx(st,{className:"h-4 w-4"})}),l&&e.jsx("div",{className:"shrink-0",children:l}),e.jsxs("div",{className:"flex-1 min-w-0",children:[a&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-sm font-semibold text-foreground truncate",children:a}),u&&u]}),n&&e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:n})]}),r&&e.jsx("div",{className:"shrink-0 flex items-center gap-1",children:r}),x&&e.jsx(E,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:c,children:e.jsx(We,{className:"h-4 w-4"})})]}),d&&e.jsx(O,{})]}),e.jsx("div",{className:I("flex-1",p&&"overflow-y-auto overflow-x-hidden",!h&&v[t],h&&t==="default"&&"p-4",h&&t==="compact"&&"p-3",h&&t==="mini"&&"p-2"),children:j}),m&&e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsx("div",{className:v[t],children:m})]})]})}var K="rovingFocusGroup.onEntryFocus",at={bubbles:!1,cancelable:!0},M="RovingFocusGroup",[H,he,nt]=He(M),[rt,ge]=le(M,[nt]),[ot,it]=rt(M),pe=o.forwardRef((t,s)=>e.jsx(H.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(H.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(ct,{...t,ref:s})})}));pe.displayName=M;var ct=o.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,orientation:n,loop:l=!1,dir:u,currentTabStopId:r,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:x,onEntryFocus:d,preventScrollOnEntryFocus:i=!1,...c}=t,m=o.useRef(null),p=de(s,m),b=me(u),[j,g]=fe({prop:r,defaultProp:f??null,onChange:x,caller:M}),[y,C]=o.useState(!1),v=Ye(d),h=he(a),w=o.useRef(!1),[N,se]=o.useState(0);return o.useEffect(()=>{const A=m.current;if(A)return A.addEventListener(K,v),()=>A.removeEventListener(K,v)},[v]),e.jsx(ot,{scope:a,orientation:n,dir:b,loop:l,currentTabStopId:j,onItemFocus:o.useCallback(A=>g(A),[g]),onItemShiftTab:o.useCallback(()=>C(!0),[]),onFocusableItemAdd:o.useCallback(()=>se(A=>A+1),[]),onFocusableItemRemove:o.useCallback(()=>se(A=>A-1),[]),children:e.jsx(L.div,{tabIndex:y||N===0?-1:0,"data-orientation":n,...c,ref:p,style:{outline:"none",...t.style},onMouseDown:S(t.onMouseDown,()=>{w.current=!0}),onFocus:S(t.onFocus,A=>{const $e=!w.current;if(A.target===A.currentTarget&&$e&&!y){const ae=new CustomEvent(K,at);if(A.currentTarget.dispatchEvent(ae),!ae.defaultPrevented){const V=h().filter(F=>F.focusable),Ve=V.find(F=>F.active),Be=V.find(F=>F.id===j),Ke=[Ve,Be,...V].filter(Boolean).map(F=>F.ref.current);Ne(Ke,i)}}w.current=!1}),onBlur:S(t.onBlur,()=>C(!1))})})}),ve="RovingFocusGroupItem",be=o.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,focusable:n=!0,active:l=!1,tabStopId:u,children:r,...f}=t,x=ue(),d=u||x,i=it(ve,a),c=i.currentTabStopId===d,m=he(a),{onFocusableItemAdd:p,onFocusableItemRemove:b,currentTabStopId:j}=i;return o.useEffect(()=>{if(n)return p(),()=>b()},[n,p,b]),e.jsx(H.ItemSlot,{scope:a,id:d,focusable:n,active:l,children:e.jsx(L.span,{tabIndex:c?0:-1,"data-orientation":i.orientation,...f,ref:s,onMouseDown:S(t.onMouseDown,g=>{n?i.onItemFocus(d):g.preventDefault()}),onFocus:S(t.onFocus,()=>i.onItemFocus(d)),onKeyDown:S(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){i.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=dt(g,i.orientation,i.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let v=m().filter(h=>h.focusable).map(h=>h.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const h=v.indexOf(g.currentTarget);v=i.loop?mt(v,h+1):v.slice(h+1)}setTimeout(()=>Ne(v))}}),children:typeof r=="function"?r({isCurrentTabStop:c,hasTabStop:j!=null}):r})})});be.displayName=ve;var lt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ut(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function dt(t,s,a){const n=ut(t.key,a);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return lt[n]}function Ne(t,s=!1){const a=document.activeElement;for(const n of t)if(n===a||(n.focus({preventScroll:s}),document.activeElement!==a))return}function mt(t,s){return t.map((a,n)=>t[(s+n)%t.length])}var ft=pe,xt=be;function ht(t,s){return o.useReducer((a,n)=>s[a][n]??a,t)}var je=t=>{const{present:s,children:a}=t,n=gt(s),l=typeof a=="function"?a({present:n.isPresent}):o.Children.only(a),u=de(n.ref,pt(l));return typeof a=="function"||n.isPresent?o.cloneElement(l,{ref:u}):null};je.displayName="Presence";function gt(t){const[s,a]=o.useState(),n=o.useRef(null),l=o.useRef(t),u=o.useRef("none"),r=t?"mounted":"unmounted",[f,x]=ht(r,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const d=z(n.current);u.current=f==="mounted"?d:"none"},[f]),ne(()=>{const d=n.current,i=l.current;if(i!==t){const m=u.current,p=z(d);t?x("MOUNT"):p==="none"||d?.display==="none"?x("UNMOUNT"):x(i&&m!==p?"ANIMATION_OUT":"UNMOUNT"),l.current=t}},[t,x]),ne(()=>{if(s){let d;const i=s.ownerDocument.defaultView??window,c=p=>{const j=z(n.current).includes(p.animationName);if(p.target===s&&j&&(x("ANIMATION_END"),!l.current)){const g=s.style.animationFillMode;s.style.animationFillMode="forwards",d=i.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=g)})}},m=p=>{p.target===s&&(u.current=z(n.current))};return s.addEventListener("animationstart",m),s.addEventListener("animationcancel",c),s.addEventListener("animationend",c),()=>{i.clearTimeout(d),s.removeEventListener("animationstart",m),s.removeEventListener("animationcancel",c),s.removeEventListener("animationend",c)}}else x("ANIMATION_END")},[s,x]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:o.useCallback(d=>{n.current=d?getComputedStyle(d):null,a(d)},[])}}function z(t){return t?.animationName||"none"}function pt(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var q="Tabs",[vt,Kt]=le(q,[ge]),ye=ge(),[bt,te]=vt(q),we=o.forwardRef((t,s)=>{const{__scopeTabs:a,value:n,onValueChange:l,defaultValue:u,orientation:r="horizontal",dir:f,activationMode:x="automatic",...d}=t,i=me(f),[c,m]=fe({prop:n,onChange:l,defaultProp:u??"",caller:q});return e.jsx(bt,{scope:a,baseId:ue(),value:c,onValueChange:m,orientation:r,dir:i,activationMode:x,children:e.jsx(L.div,{dir:i,"data-orientation":r,...d,ref:s})})});we.displayName=q;var Te="TabsList",Ae=o.forwardRef((t,s)=>{const{__scopeTabs:a,loop:n=!0,...l}=t,u=te(Te,a),r=ye(a);return e.jsx(ft,{asChild:!0,...r,orientation:u.orientation,dir:u.dir,loop:n,children:e.jsx(L.div,{role:"tablist","aria-orientation":u.orientation,...l,ref:s})})});Ae.displayName=Te;var Ce="TabsTrigger",Ie=o.forwardRef((t,s)=>{const{__scopeTabs:a,value:n,disabled:l=!1,...u}=t,r=te(Ce,a),f=ye(a),x=Fe(r.baseId,n),d=Re(r.baseId,n),i=n===r.value;return e.jsx(xt,{asChild:!0,...f,focusable:!l,active:i,children:e.jsx(L.button,{type:"button",role:"tab","aria-selected":i,"aria-controls":d,"data-state":i?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:x,...u,ref:s,onMouseDown:S(t.onMouseDown,c=>{!l&&c.button===0&&c.ctrlKey===!1?r.onValueChange(n):c.preventDefault()}),onKeyDown:S(t.onKeyDown,c=>{[" ","Enter"].includes(c.key)&&r.onValueChange(n)}),onFocus:S(t.onFocus,()=>{const c=r.activationMode!=="manual";!i&&!l&&c&&r.onValueChange(n)})})})});Ie.displayName=Ce;var Ee="TabsContent",Se=o.forwardRef((t,s)=>{const{__scopeTabs:a,value:n,forceMount:l,children:u,...r}=t,f=te(Ee,a),x=Fe(f.baseId,n),d=Re(f.baseId,n),i=n===f.value,c=o.useRef(i);return o.useEffect(()=>{const m=requestAnimationFrame(()=>c.current=!1);return()=>cancelAnimationFrame(m)},[]),e.jsx(je,{present:l||i,children:({present:m})=>e.jsx(L.div,{"data-state":i?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":x,hidden:!m,id:d,tabIndex:0,...r,ref:s,style:{...t.style,animationDuration:c.current?"0s":void 0},children:m&&u})})});Se.displayName=Ee;function Fe(t,s){return`${t}-trigger-${s}`}function Re(t,s){return`${t}-content-${s}`}var Nt=we,ke=Ae,De=Ie,Pe=Se;const jt=Nt,Le=o.forwardRef(({className:t,...s},a)=>e.jsx(ke,{ref:a,className:I("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...s}));Le.displayName=ke.displayName;const Me=o.forwardRef(({className:t,...s},a)=>e.jsx(De,{ref:a,className:I("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...s}));Me.displayName=De.displayName;const G=o.forwardRef(({className:t,...s},a)=>e.jsx(Pe,{ref:a,className:I("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));G.displayName=Pe.displayName;/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ie=P("globe",yt);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$=P("loader-circle",wt);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_e=P("lock",Tt);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],ze=P("log-in",At);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],It=P("log-out",Ct);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],St=P("mail",Et);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Rt=P("shield",Ft),Ue=o.createContext(void 0);function kt({children:t}){const[s,a]=o.useState(null),[n,l]=o.useState(!0),[u,r]=o.useState(null);o.useEffect(()=>{(async()=>{try{const c=await T.get("auth.token"),m=await T.get("auth.timestamp"),p=await T.get("auth.userData");if(c&&m&&p){const b=Date.now()-m,j=7*24*60*60*1e3;b<j?a(p):await T.remove(["auth.token","auth.timestamp","auth.userData"])}}catch(c){console.warn("[Auth] Failed to load user:",c)}finally{l(!1)}})()},[]);const f=async i=>{try{l(!0),r(null);let c;try{c=(await D.sendToContent({type:"login",data:i}))?.data}catch{const m=await fetch("https://reqres.in/api/login",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"reqres-free-v1"},body:JSON.stringify(i)}),p=await m.json();m.ok&&p.token?c={success:!0,user:{email:i.email,token:p.token,loginTime:Date.now(),firstName:"Demo",lastName:"User",name:"Demo User",avatar:`https://api.dicebear.com/7.x/thumbs/svg?seed=${i.email}`}}:c={success:!1,error:p.error||"Login failed"}}if(c?.success&&c?.user)return a(c.user),await T.set({"auth.userData":c.user,"auth.token":c.user.token,"auth.timestamp":Date.now()}),{success:!0,user:c.user};{const m=c?.error||"Login failed";return r(m),{success:!1,error:m}}}catch{const m="Login request failed";return r(m),{success:!1,error:m}}finally{l(!1)}},x=async()=>{try{await D.sendToContent({type:"logout",data:{}})}catch{}return a(null),r(null),await T.remove(["auth.userData","auth.token","auth.timestamp"]),{success:!0}},d=()=>r(null);return e.jsx(Ue.Provider,{value:{user:s,isAuthenticated:!!s,isLoading:n,error:u,login:f,logout:x,clearError:d},children:t})}function _(){const t=o.useContext(Ue);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function Dt(){const{user:t}=_();return t?t.name?t.name:t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.firstName?t.firstName:t.email?t.email.split("@")[0]:"User":"Guest"}const Y=o.forwardRef(({className:t,type:s="text",...a},n)=>e.jsx("input",{type:s,className:I("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...a}));Y.displayName="Input";function Pt({onSuccess:t,onError:s,title:a="Sign In",subtitle:n="Enter your credentials to continue",showCard:l=!0,className:u=""}){const{login:r,isLoading:f,error:x}=_(),[d,i]=o.useState({email:"",password:""}),[c,m]=o.useState({}),[p,b]=o.useState(null),j=(h,w)=>{i(N=>({...N,[h]:w})),c[h]&&m(N=>({...N,[h]:""})),p&&b(null)},g=()=>{const h={};return d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(h.email="Please enter a valid email address"):h.email="Email is required",d.password.trim()?d.password.length<3&&(h.password="Password must be at least 3 characters"):h.password="Password is required",m(h),Object.keys(h).length===0},y=async h=>{if(h.preventDefault(),!!g())try{const w=await r(d);if(w.success&&w.user)b({type:"success",message:"Login successful!"}),t?.(w.user);else{const N=w.error||"Login failed";b({type:"error",message:N}),s?.(N)}}catch{const N="Login request failed";b({type:"error",message:N}),s?.(N)}},C=()=>{i({email:"eve.holt@reqres.in",password:"cityslicka"}),m({}),b(null)},v=e.jsxs("div",{className:"space-y-4",children:[(a||n)&&e.jsxs("div",{className:"text-center space-y-1",children:[a&&e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:a}),n&&e.jsx("p",{className:"text-sm text-muted-foreground",children:n})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(St,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(Y,{id:"email",type:"email",placeholder:"name@example.com",value:d.email,onChange:h=>j("email",h.target.value),disabled:f,className:`px-10 ${c.email?"border-destructive":""}`})]}),c.email&&e.jsx("p",{className:"text-xs text-destructive",children:c.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Y,{id:"password",type:"password",placeholder:"Enter your password",value:d.password,onChange:h=>j("password",h.target.value),className:`pl-10 ${c.password?"border-destructive":""}`,disabled:f})]}),c.password&&e.jsx("p",{className:"text-xs text-destructive",children:c.password})]}),e.jsx(E,{type:"submit",className:"w-full",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Sign In"]})}),e.jsx(E,{type:"button",variant:"outline",className:"w-full",onClick:C,disabled:f,children:"Try Demo Login"})]}),e.jsx(J,{result:p,onDismiss:()=>b(null),autoDismiss:p?.type==="success",autoDismissDelay:2e3}),x&&!p&&e.jsx(Je,{variant:"destructive",children:e.jsx(Xe,{className:"text-sm",children:x})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Demo credentials: eve.holt@reqres.in / cityslicka"})})]});return l?e.jsx(R,{className:`w-full max-w-sm mx-auto ${u}`,children:e.jsx(k,{className:"p-6",children:v})}):e.jsx("div",{className:`w-full max-w-sm mx-auto ${u}`,children:v})}const Oe=o.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:I("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Oe.displayName="Avatar";const qe=o.forwardRef(({className:t,...s},a)=>e.jsx("img",{ref:a,className:I("aspect-square h-full w-full",t),...s}));qe.displayName="AvatarImage";const Ge=o.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:I("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Ge.displayName="AvatarFallback";function Lt({onLogout:t,showCard:s=!0,className:a=""}){const{user:n,logout:l,isLoading:u}=_(),r=Dt(),f=async()=>{await l(),t?.()},x=`https://api.dicebear.com/7.x/thumbs/svg?seed=${r||"user"}`,d=e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Oe,{children:[e.jsx(qe,{src:n?.avatar||x,alt:r}),e.jsx(Ge,{children:r?.[0]?.toUpperCase()||"U"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:r}),n?.email&&e.jsx("div",{className:"text-xs text-muted-foreground",children:n.email})]})]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:f,disabled:u,className:"h-8 w-8 p-0",children:u?e.jsx($,{className:"h-4 w-4 animate-spin"}):e.jsx(It,{className:"h-4 w-4"})})]});return s?e.jsx(R,{className:a,children:e.jsx(k,{className:"p-3",children:d})}):e.jsx("div",{className:a,children:d})}function Mt({value:t}){const{isAuthenticated:s}=_();return e.jsx(G,{value:t,className:"mt-0",children:e.jsxs(R,{className:"bg-card border-border",children:[e.jsx(X,{className:"pb-3",children:e.jsxs(Z,{className:"text-base text-card-foreground flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),s?"Account":"Sign In"]})}),e.jsx(k,{children:s?e.jsx(Lt,{showCard:!1}):e.jsx(Pt,{showCard:!1,title:"",subtitle:"Sign in to access personalized features"})})]})})}function _t({value:t,currentTab:s}){const[a,n]=o.useState(!1),[l,u]=o.useState(null),[r,f]=o.useState(null),x=D.isTabSupported(s),d=async()=>{if(x){n(!0),u(null);try{const i=await D.sendToContent({type:"getPageData",data:{}});i?.success?(f(i.data),u({type:"success",message:"Page analyzed successfully!"})):u({type:"error",message:i?.error||"Analysis failed"})}catch{u({type:"error",message:"Could not analyze page"})}finally{n(!1)}}};return e.jsx(G,{value:t,className:"mt-0",children:e.jsxs(R,{className:"bg-card border-border",children:[e.jsx(X,{className:"pb-3",children:e.jsxs(Z,{className:"text-base text-card-foreground flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Page Analysis"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsx(E,{onClick:d,disabled:!x||a,className:"w-full",variant:x?"default":"secondary",children:a?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Analyze Page"]})}),e.jsx(J,{result:l,onDismiss:()=>u(null),autoDismiss:!0,autoDismissDelay:3e3}),r&&e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx(O,{className:"bg-border"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-card-foreground",children:"Word Count"}),e.jsx("div",{className:"text-muted-foreground",children:r.wordCount||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-card-foreground",children:"Page Size"}),e.jsx("div",{className:"text-muted-foreground",children:r.pageSize?.formatted||"Unknown"})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:e.jsxs("div",{className:"truncate",children:["Title: ",r.title]})})]}),!x&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground py-2",children:[e.jsx(ee,{className:"w-4 h-4 mx-auto mb-1"}),"Analysis not available on this page type"]})]})]})})}function zt({value:t}){const{isAuthenticated:s,user:a}=_(),[n,l]=o.useState(!1),[u,r]=o.useState(null),[f,x]=o.useState(null),d=async()=>{l(!0),r(null);try{const i=await D.sendToContent({type:"getQuote",data:{}});i?.success&&i?.data?.success?(x(i.data.quote),r({type:"success",message:"Quote fetched successfully!"})):r({type:"error",message:i?.data?.error||"Failed to get quote"})}catch{r({type:"error",message:"Could not fetch quote"})}finally{l(!1)}};return e.jsx(G,{value:t,className:"mt-0",children:e.jsxs(R,{className:"bg-card border-border",children:[e.jsx(X,{className:"pb-3",children:e.jsxs(Z,{className:"text-base text-card-foreground flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Inspirational Quotes"]})}),e.jsx(k,{className:"space-y-4",children:s?e.jsxs(e.Fragment,{children:[e.jsx(E,{onClick:d,disabled:n,className:"w-full",variant:"default",children:n?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"h-4 w-4 mr-2 animate-spin"}),"Getting Quote..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Get Inspirational Quote"]})}),e.jsx(J,{result:u,onDismiss:()=>r(null),autoDismiss:!0,autoDismissDelay:3e3}),f&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(O,{className:"bg-border"}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded text-sm",children:[e.jsxs("div",{className:"italic mb-2 text-card-foreground",children:['"',f.text,'"']}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:["â€” ",f.author]}),e.jsx(W,{variant:"default",className:"mt-2 text-xs",children:"Premium Member"})]})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(U,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium text-card-foreground mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Sign in to access inspirational quotes and personalized content"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground border border-dashed rounded py-2",children:[e.jsx(ze,{className:"w-3 h-3"}),e.jsx("span",{children:"Visit the Account tab to sign in"})]})]})})]})})}function ce({isEnabled:t=!0,isSupported:s=!0,customStatus:a,className:n=""}){if(a)return e.jsx(W,{variant:a.variant,className:n,children:a.text});const u=t?s?{text:"Ready",variant:"default"}:{text:"Unavailable",variant:"outline"}:{text:"Disabled",variant:"secondary"};return e.jsx(W,{variant:u.variant,className:n,children:u.text})}function Ut({tab:t,showSecurityIcon:s=!0,className:a=""}){if(!t)return e.jsx(R,{className:`bg-card border-border ${a}`,children:e.jsx(k,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"No active tab"})]})})});const l=t.url?t.url.startsWith("https://")?_e:t.url.startsWith("chrome://")||t.url.startsWith("chrome-extension://")?Rt:ie:ie,u=()=>{try{return t.url?new URL(t.url).hostname:"Unknown"}catch{return"Invalid URL"}};return e.jsx(R,{className:`bg-card border-border ${a}`,children:e.jsx(k,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s&&e.jsx(l,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),t.favIconUrl&&e.jsx("img",{src:t.favIconUrl,alt:"",className:"w-4 h-4 flex-shrink-0",onError:r=>{r.currentTarget.style.display="none"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate text-card-foreground",children:t.title||"Untitled"}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:u()})]})]})})})}function Ot(){const[t,s]=o.useState("analyzer"),[a,n]=o.useState(!0),[l,u]=o.useState(null),[r,f]=o.useState({pageAnalyzerEnabled:!0,quoteGeneratorEnabled:!0,authenticationEnabled:!0});o.useEffect(()=>{x()},[]);const x=async()=>{try{const g=await D.getActiveTab();u(g);const y=await T.get("extensionEnabled",!0);n(y);const C=await T.get("pageAnalyzerEnabled",!0),v=await T.get("quoteGeneratorEnabled",!0),h=await T.get("authenticationEnabled",!0);f({pageAnalyzerEnabled:C,quoteGeneratorEnabled:v,authenticationEnabled:h});const w=await T.get("popup.activeTab","analyzer");let N="analyzer";w==="analyzer"&&C?N="analyzer":w==="quotes"&&v?N="quotes":w==="account"&&h?N="account":C?N="analyzer":h?N="account":v&&(N="quotes"),s(N)}catch(g){console.error("Failed to initialize popup:",g)}},d=async g=>{s(g),await T.set("popup.activeTab",g)},i=()=>{chrome.runtime.openOptionsPage()},c=()=>D.isTabSupported(l),m=[];r.pageAnalyzerEnabled&&m.push({value:"analyzer",label:"Analyzer",icon:Q}),r.authenticationEnabled&&m.push({value:"account",label:"Account",icon:xe}),r.quoteGeneratorEnabled&&m.push({value:"quotes",label:"Quotes",icon:U});const p=e.jsx(et,{name:"CometOne",size:"md"}),b=e.jsx(ce,{isEnabled:a,isSupported:c()}),j=e.jsx(E,{variant:"ghost",size:"sm",onClick:i,className:"h-6 w-6 p-0",children:e.jsx(oe,{className:"text-foreground hover:text-background h-4 w-4"})});return a?m.length===0?e.jsx(B,{variant:"default",size:"lg",logo:p,badge:b,headerActions:j,subtitle:"No Features Enabled",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(oe,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h3",{className:"font-medium mb-2",children:"No Features Available"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Enable features in settings to use the extension."}),e.jsx(E,{onClick:i,variant:"default",children:"Configure Features"})]})}):e.jsx(B,{variant:"default",size:"lg",logo:p,badge:b,headerActions:j,subtitle:"Built with Comet Framework",className:"rounded-none border-0 shadow-none",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(jt,{value:t,onValueChange:d,className:"w-full",children:[e.jsx(Le,{className:`grid w-full grid-cols-${m.length} mb-3`,children:m.map(g=>{const y=g.icon;return e.jsxs(Me,{value:g.value,className:"flex items-center gap-1",children:[e.jsx(y,{className:"w-3 h-3"}),e.jsx("span",{className:"sm:inline",children:g.label})]},g.value)})}),r.authenticationEnabled&&e.jsx(Mt,{value:"account"}),r.pageAnalyzerEnabled&&e.jsx(_t,{value:"analyzer",currentTab:l}),r.quoteGeneratorEnabled&&e.jsx(zt,{value:"quotes"})]}),e.jsx(Ut,{tab:l,showSecurityIcon:!0})]})}):e.jsx(B,{variant:"default",size:"lg",logo:p,badge:e.jsx(ce,{isEnabled:!1}),headerActions:j,subtitle:"Extension Disabled",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h3",{className:"font-medium mb-2",children:"Extension Disabled"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Enable the extension in settings to access features."}),e.jsx(E,{onClick:i,variant:"default",children:"Open Settings"})]})})}function qt(){const[t,s]=o.useState("metro"),[a,n]=o.useState("light");return o.useEffect(()=>{T.get("app.theme","metro").then(s),T.get("app.variant","light").then(n)},[]),e.jsx(Ze,{theme:t,variant:a,detectSystem:!1,children:e.jsx(kt,{children:e.jsx(Ot,{})})})}const Gt=tt.createRoot(document.getElementById("root"));Gt.render(e.jsx(qt,{}));
//# sourceMappingURL=popup.js.map
