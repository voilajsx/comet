import{c as I,j as e,a as L,B as $,X as W,S as O,r as T,u as A,E as B,b as R,d as V,T as Z,e as D}from"./index-CZNxiXtd.js";import{s as x}from"./storage-DwfbqBlG.js";import{T as H,a as M,b as X,c as q}from"./tabs-B3iuBGx8.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=I("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function C({variant:s="default",size:m="md",title:n,subtitle:t,logo:r,badge:a,headerActions:c,showBack:l=!1,showClose:p=!1,showDivider:E=!0,onBack:f,onClose:g,footer:h,scrollable:j=!0,className:b,children:P,...o}){const k={sm:"w-72 max-h-80",md:"w-80 max-h-96",lg:"w-96 max-h-[32rem]",auto:"min-w-72 max-w-lg max-h-[80vh]"},y={default:"bg-background border-border shadow-lg",compact:"bg-card border-border shadow-md",mini:"bg-popover border-border shadow-sm"},u={default:"p-4",compact:"p-3",mini:"p-2"},d=n||t||r||a||c||l||p;return e.jsxs("div",{className:L("flex flex-col border rounded-lg overflow-hidden",k[m],y[s],b),...o,children:[d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:L("flex items-center gap-3",u[s]),children:[l&&e.jsx($,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:f,children:e.jsx(G,{className:"h-4 w-4"})}),r&&e.jsx("div",{className:"shrink-0",children:r}),e.jsxs("div",{className:"flex-1 min-w-0",children:[n&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-sm font-semibold text-foreground truncate",children:n}),a&&a]}),t&&e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:t})]}),c&&e.jsx("div",{className:"shrink-0 flex items-center gap-1",children:c}),p&&e.jsx($,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 shrink-0",onClick:g,children:e.jsx(W,{className:"h-4 w-4"})})]}),E&&e.jsx(O,{})]}),e.jsx("div",{className:L("flex-1",j&&"overflow-y-auto overflow-x-hidden",!d&&u[s],d&&s==="default"&&"p-4",d&&s==="compact"&&"p-3",d&&s==="mini"&&"p-2"),children:P}),h&&e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsx("div",{className:u[s],children:h})]})]})}function J({tabs:s,defaultTab:m,onTabChange:n,className:t=""}){const r=m||s[0]?.id;return e.jsx("div",{className:`w-full ${t}`,children:e.jsxs(H,{defaultValue:r,onValueChange:n,className:"w-full",children:[e.jsx(M,{className:`grid w-full grid-cols-${s.length} mb-4`,children:s.map(a=>{const c=a.icon;return e.jsxs(X,{value:a.id,disabled:a.disabled,className:"flex items-center gap-2",children:[c&&e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:a.label})]},a.id)})}),s.map(a=>e.jsx(q,{value:a.id,className:"mt-0 focus:outline-none",children:a.content},a.id))]})})}function K({extensionName:s,extensionIcon:m,size:n="lg",variant:t="default",className:r="",customLogo:a,customActions:c,footerContent:l,onSettingsClick:p,onExtensionToggle:E}){const[f,g]=T.useState(""),[h,j]=T.useState(!0),[b,P]=T.useState({name:"Comet Extension",icon:"Zap"}),{popupTabs:o,loading:k}=A();T.useEffect(()=>{y()},[o]);const y=async()=>{try{const i=await x.get("extensionEnabled",!0);if(j(i),!s||!m){const w=await x.get("app.name","Comet Extension"),S=await x.get("app.icon","Zap");P({name:w,icon:S})}if(o.length>0&&!f){const w=await x.get("popup.activeTab",o[0].id),S=o.find(F=>F.id===w);g(S?w:o[0].id)}}catch(i){console.error("[PopupWrapper] Failed to initialize:",i)}},u=async i=>{j(i),await x.set("extensionEnabled",i),E?.(i)},d=i=>{g(i),x.set("popup.activeTab",i)},z=()=>{p?p():typeof chrome<"u"&&chrome.runtime&&chrome.runtime.openOptionsPage?chrome.runtime.openOptionsPage():typeof browser<"u"&&browser.runtime&&browser.runtime.openOptionsPage?browser.runtime.openOptionsPage():console.warn("[PopupWrapper] Options page API not available")},v=a||e.jsx(B,{name:s||b.name,icon:m||b.icon,size:"md"}),N=c||e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{variant:"ghost",size:"sm",onClick:z,className:"h-6 w-6 p-0",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(V,{checked:h,onCheckedChange:u})]});return k?e.jsx(C,{size:n,variant:t,className:`border-0 ${r}`,logo:v,headerActions:N,footer:l,children:e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:e.jsx("div",{className:"text-sm",children:"Loading..."})})}):h?o.length===0?e.jsx(C,{size:n,variant:t,className:`border-0 ${r}`,logo:v,headerActions:N,footer:l,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("div",{className:"text-sm",children:"No features available"}),e.jsx("div",{className:"text-xs mt-1",children:"Check settings or current page"})]})}):e.jsx(C,{variant:t,size:n,className:`border-0 ${r}`,logo:v,headerActions:N,footer:l,scrollable:!0,children:e.jsx(J,{tabs:o,defaultTab:f,onTabChange:d})}):e.jsx(C,{size:n,variant:t,className:`border-0 ${r}`,logo:v,headerActions:N,footer:l,children:e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("div",{className:"text-sm",children:"Extension is disabled"}),e.jsx("div",{className:"text-xs mt-1",children:"Toggle above to enable"})]})})}function Q(){return e.jsx(K,{})}function U(){return e.jsx(Z,{theme:"metro",variant:"light",detectSystem:!1,children:e.jsx(Q,{})})}const Y=D.createRoot(document.getElementById("root"));Y.render(e.jsx(U,{}));
//# sourceMappingURL=popup.js.map
