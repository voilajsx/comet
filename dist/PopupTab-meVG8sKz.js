import{r as o,j as e,a as x,g as A,C as T,F as z,B as p,D as g,S as V,G as k}from"./index-BkgtWSli.js";import{c as F}from"./tabs-DBwpQ1CQ.js";import{C as S,a as B,c as L,b as P,B as h}from"./card-DLJBgNU_.js";import{u as R,C as j}from"./usePageAnalyzer-DY0ld9gc.js";import{L as f}from"./loader-circle-BF6AziYL.js";import{C as D,a as H}from"./circle-check-big-Cpwb0EuN.js";import"./storage-CVg25cfU.js";import"./api-u9XC6Ash.js";const M=A("relative w-full rounded-lg border  px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:" bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),v=o.forwardRef(({className:r,variant:l,...s},a)=>e.jsx("div",{ref:a,role:"alert",className:x(M({variant:l}),r),...s}));v.displayName="Alert";const E=o.forwardRef(({className:r,...l},s)=>e.jsx("h5",{ref:s,className:x("mb-1 font-medium leading-none tracking-tight",r),...l}));E.displayName="AlertTitle";const N=o.forwardRef(({className:r,...l},s)=>e.jsx("div",{ref:s,className:x("text-sm [&_p]:leading-relaxed",r),...l}));N.displayName="AlertDescription";function Q({value:r,currentTab:l}){const{pageData:s,validationResult:a,settings:y,analyzePageSize:b,validateHTML:w,loading:c}=R(),[d,t]=o.useState(null),n=T.isTabSupported(l),C=async()=>{if(!n){t({type:"error",message:"Not available on this page"});return}const i=await b();i.success?(t({type:"success",message:"Analysis complete!"}),y.autoValidate&&setTimeout(()=>u(),1e3)):t({type:"error",message:i.error}),setTimeout(()=>t(null),3e3)},u=async()=>{if(!n){t({type:"error",message:"Not available on this page"});return}const i=await w();if(i.success){const m=i.data.errors;t({type:m===0?"success":"warning",message:m===0?"Valid HTML!":`${m} errors found`})}else t({type:"error",message:i.error});setTimeout(()=>t(null),3e3)};return e.jsx(F,{value:r,className:"mt-0",children:e.jsxs(S,{children:[e.jsx(B,{className:"pb-4",children:e.jsxs(L,{className:"text-base flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Page Analysis & Validation"]})}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{onClick:C,disabled:c.analyze||!n,className:"w-full",children:c.analyze?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Analyze Page Size"]})}),e.jsx(p,{onClick:u,disabled:c.validate||!n,variant:"outline",className:"w-full",children:c.validate?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 mr-2 animate-spin"}),"Validating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Validate HTML"]})})]}),d&&e.jsxs(v,{variant:d.type==="success"?"default":"destructive",children:[d.type==="success"?e.jsx(D,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"}),e.jsx(N,{class:"pt-1",children:d.message})]}),(s||a)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{}),s&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:s.domain})]}),e.jsx(h,{variant:"secondary",children:s.size})]}),a&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:a.domain})]}),e.jsx(h,{variant:a.isValid?"default":"destructive",children:a.isValid?"Valid":`${a.errors} errors`})]})]}),!n&&e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(k,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("div",{className:"text-sm",children:"Not available on this page type"})]})]})]})})}export{Q as default};
//# sourceMappingURL=PopupTab-meVG8sKz.js.map
